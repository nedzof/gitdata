import{S as Mt,i as Ut,s as Jt,n as Ge,d as f,w as ct,r as ut,p as r,m as X,z as Pe,a as Ne,b as R,c as a,o as q,B as dt,y as Ft,h as P,e as u,f as b,q as B,g as U,k as w,j as d,t as J,l as Ht,v as zt,D as ot,A as qt,F as Gt,u as Xe}from"../chunks/BOFvEgh9.js";import{e as we}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{g as it}from"../chunks/Bl12ujJP.js";import{p as Xt}from"../chunks/DoBB0Fpi.js";function Ot(l,t,e){const n=l.slice();return n[34]=t[e][0],n[35]=t[e][1],n}function At(l,t,e){const n=l.slice();return n[38]=t[e],n[39]=t,n[40]=e,n}function rt(l){const t=l.slice(),e=t[6].find(n=>n.id===t[1]);return t[41]=e,t}function Dt(l,t,e){const n=l.slice();return n[41]=t[e],n}function Kt(l){let t,e,n,c="Policy JSON",i,s,p,C,o,h,I,g="üìÅ Upload JSON File",v,y,k,T,m,O,S,L=l[3]&&Nt(l);return{c(){t=d("div"),e=d("div"),n=d("label"),n.textContent=c,i=w(),s=d("textarea"),p=w(),C=d("div"),o=d("input"),h=w(),I=d("label"),I.textContent=g,v=w(),y=d("button"),k=J("Import Policy"),m=w(),L&&L.c(),this.h()},l(D){t=u(D,"DIV",{class:!0});var V=b(t);e=u(V,"DIV",{class:!0});var j=b(e);n=u(j,"LABEL",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-fcfvm8"&&(n.textContent=c),i=P(j),s=u(j,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),b(s).forEach(f),p=P(j),C=u(j,"DIV",{class:!0});var F=b(C);o=u(F,"INPUT",{type:!0,accept:!0,style:!0,id:!0}),h=P(F),I=u(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(I)!=="svelte-scxlfj"&&(I.textContent=g),v=P(F),y=u(F,"BUTTON",{class:!0});var x=b(y);k=U(x,"Import Policy"),x.forEach(f),F.forEach(f),m=P(j),L&&L.l(j),j.forEach(f),V.forEach(f),this.h()},h(){r(n,"class","svelte-1g205n6"),r(s,"placeholder","Paste your policy JSON here or upload a JSON file..."),r(s,"rows","10"),r(s,"class","svelte-1g205n6"),r(o,"type","file"),r(o,"accept",".json"),Gt(o,"display","none"),r(o,"id","json-file-upload"),r(I,"for","json-file-upload"),r(I,"class","btn secondary svelte-1g205n6"),r(y,"class","btn primary svelte-1g205n6"),y.disabled=T=!l[2].trim(),r(C,"class","json-actions svelte-1g205n6"),r(e,"class","json-input-section svelte-1g205n6"),r(t,"class","json-import-content svelte-1g205n6")},m(D,V){R(D,t,V),a(t,e),a(e,n),a(e,i),a(e,s),X(s,l[2]),a(e,p),a(e,C),a(C,o),a(C,h),a(C,I),a(C,v),a(C,y),a(y,k),a(e,m),L&&L.m(e,null),O||(S=[q(s,"input",l[21]),q(o,"change",l[15]),q(y,"click",l[14])],O=!0)},p(D,V){V[0]&4&&X(s,D[2]),V[0]&4&&T!==(T=!D[2].trim())&&(y.disabled=T),D[3]?L?L.p(D,V):(L=Nt(D),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},d(D){D&&f(t),L&&L.d(),O=!1,ut(S)}}}function Qt(l){let t,e,n,c="Policy Template (Optional)",i,s,p,C="Start from Scratch",o,h,I,g=we(l[6]),v=[];for(let k=0;k<g.length;k+=1)v[k]=Lt(Dt(l,g,k));let y=l[1]&&St(rt(l));return{c(){t=d("div"),e=d("div"),n=d("label"),n.textContent=c,i=w(),s=d("select"),p=d("option"),p.textContent=C;for(let k=0;k<v.length;k+=1)v[k].c();o=w(),y&&y.c(),this.h()},l(k){t=u(k,"DIV",{class:!0});var T=b(t);e=u(T,"DIV",{class:!0});var m=b(e);n=u(m,"LABEL",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-3n3ssx"&&(n.textContent=c),i=P(m),s=u(m,"SELECT",{class:!0});var O=b(s);p=u(O,"OPTION",{"data-svelte-h":!0}),B(p)!=="svelte-ikfkzw"&&(p.textContent=C);for(let S=0;S<v.length;S+=1)v[S].l(O);O.forEach(f),o=P(m),y&&y.l(m),m.forEach(f),T.forEach(f),this.h()},h(){r(n,"class","svelte-1g205n6"),p.__value="",X(p,p.__value),r(s,"class","svelte-1g205n6"),l[1]===void 0&&dt(()=>l[19].call(s)),r(e,"class","template-dropdown-section svelte-1g205n6"),r(t,"class","template-content svelte-1g205n6")},m(k,T){R(k,t,T),a(t,e),a(e,n),a(e,i),a(e,s),a(s,p);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(s,null);Pe(s,l[1],!0),a(e,o),y&&y.m(e,null),h||(I=[q(s,"change",l[19]),q(s,"change",l[20])],h=!0)},p(k,T){if(T[0]&64){g=we(k[6]);let m;for(m=0;m<g.length;m+=1){const O=Dt(k,g,m);v[m]?v[m].p(O,T):(v[m]=Lt(O),v[m].c(),v[m].m(s,null))}for(;m<v.length;m+=1)v[m].d(1);v.length=g.length}T[0]&66&&Pe(s,k[1]),k[1]?y?y.p(rt(k),T):(y=St(rt(k)),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(k){k&&f(t),ct(v,k),y&&y.d(),h=!1,ut(I)}}}function Nt(l){let t,e,n;return{c(){t=d("div"),e=J("‚ùå "),n=J(l[3]),this.h()},l(c){t=u(c,"DIV",{class:!0});var i=b(t);e=U(i,"‚ùå "),n=U(i,l[3]),i.forEach(f),this.h()},h(){r(t,"class","error-message svelte-1g205n6")},m(c,i){R(c,t,i),a(t,e),a(t,n)},p(c,i){i[0]&8&&Ne(n,c[3])},d(c){c&&f(t)}}}function Lt(l){let t,e=l[41].name+"",n;return{c(){t=d("option"),n=J(e),this.h()},l(c){t=u(c,"OPTION",{});var i=b(t);n=U(i,e),i.forEach(f),this.h()},h(){t.__value=l[41].id,X(t,t.__value)},m(c,i){R(c,t,i),a(t,n)},p:Ge,d(c){c&&f(t)}}}function St(l){let t,e=l[41]&&jt(l);return{c(){e&&e.c(),t=Xe()},l(n){e&&e.l(n),t=Xe()},m(n,c){e&&e.m(n,c),R(n,t,c)},p(n,c){n[41]?e?e.p(n,c):(e=jt(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(n){n&&f(t),e&&e.d(n)}}}function jt(l){let t,e,n,c=l[41].category+"",i,s,p,C,o=l[41].description+"",h,I,g,v=Object.keys(l[41].template).length+"",y,k;return{c(){t=d("div"),e=d("div"),n=d("span"),i=J(c),p=w(),C=d("p"),h=J(o),I=w(),g=d("span"),y=J(v),k=J(" rules included"),this.h()},l(T){t=u(T,"DIV",{class:!0});var m=b(t);e=u(m,"DIV",{class:!0});var O=b(e);n=u(O,"SPAN",{class:!0});var S=b(n);i=U(S,c),S.forEach(f),p=P(O),C=u(O,"P",{class:!0});var L=b(C);h=U(L,o),L.forEach(f),I=P(O),g=u(O,"SPAN",{class:!0});var D=b(g);y=U(D,v),k=U(D," rules included"),D.forEach(f),O.forEach(f),m.forEach(f),this.h()},h(){r(n,"class",s="category-badge category-"+l[41].category+" svelte-1g205n6"),r(C,"class","svelte-1g205n6"),r(g,"class","rules-count svelte-1g205n6"),r(e,"class","template-info svelte-1g205n6"),r(t,"class","template-preview svelte-1g205n6")},m(T,m){R(T,t,m),a(t,e),a(e,n),a(n,i),a(e,p),a(e,C),a(C,h),a(e,I),a(e,g),a(g,y),a(g,k)},p(T,m){m[0]&2&&c!==(c=T[41].category+"")&&Ne(i,c),m[0]&66&&s!==(s="category-badge category-"+T[41].category+" svelte-1g205n6")&&r(n,"class",s),m[0]&2&&o!==(o=T[41].description+"")&&Ne(h,o),m[0]&2&&v!==(v=Object.keys(T[41].template).length+"")&&Ne(y,v)},d(T){T&&f(t)}}}function Vt(l){let t,e,n="üóëÔ∏è Clear Policy",c,i;return{c(){t=d("div"),e=d("button"),e.textContent=n,this.h()},l(s){t=u(s,"DIV",{class:!0});var p=b(t);e=u(p,"BUTTON",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1xi7q5m"&&(e.textContent=n),p.forEach(f),this.h()},h(){r(e,"class","btn secondary svelte-1g205n6"),r(t,"class","current-policy-actions svelte-1g205n6")},m(s,p){R(s,t,p),a(t,e),c||(i=q(e,"click",l[16]),c=!0)},p:Ge,d(s){s&&f(t),c=!1,i()}}}function Wt(l){let t,e,n,c=l[38].label+"",i,s,p,C="+",o,h,I=l[38].description+"",g,v,y,k;function T(){return l[31](l[38])}return{c(){t=d("div"),e=d("div"),n=d("label"),i=J(c),s=w(),p=d("button"),p.textContent=C,o=w(),h=d("span"),g=J(I),v=w(),this.h()},l(m){t=u(m,"DIV",{class:!0});var O=b(t);e=u(O,"DIV",{class:!0});var S=b(e);n=u(S,"LABEL",{class:!0});var L=b(n);i=U(L,c),L.forEach(f),s=P(S),p=u(S,"BUTTON",{class:!0,"data-svelte-h":!0}),B(p)!=="svelte-hw42wx"&&(p.textContent=C),S.forEach(f),o=P(O),h=u(O,"SPAN",{class:!0});var D=b(h);g=U(D,I),D.forEach(f),v=P(O),O.forEach(f),this.h()},h(){r(n,"class","svelte-1g205n6"),r(p,"class","add-rule svelte-1g205n6"),r(e,"class","rule-header svelte-1g205n6"),r(h,"class","rule-description svelte-1g205n6"),r(t,"class","rule-item svelte-1g205n6")},m(m,O){R(m,t,O),a(t,e),a(e,n),a(n,i),a(e,s),a(e,p),a(t,o),a(t,h),a(h,g),a(t,v),y||(k=q(p,"click",T),y=!0)},p(m,O){l=m},d(m){m&&f(t),y=!1,k()}}}function Yt(l){let t,e,n,c=l[38].label+"",i,s,p,C="√ó",o,h,I=l[38].description+"",g,v,y,k,T,m;function O(){return l[25](l[38])}function S(V,j){return V[38].type==="boolean"?tl:V[38].type==="number"?el:V[38].type==="array"?$t:V[38].type==="object"?xt:Zt}let D=S(l)(l);return{c(){t=d("div"),e=d("div"),n=d("label"),i=J(c),s=w(),p=d("button"),p.textContent=C,o=w(),h=d("span"),g=J(I),v=w(),y=d("div"),D.c(),k=w(),this.h()},l(V){t=u(V,"DIV",{class:!0});var j=b(t);e=u(j,"DIV",{class:!0});var F=b(e);n=u(F,"LABEL",{class:!0});var x=b(n);i=U(x,c),x.forEach(f),s=P(F),p=u(F,"BUTTON",{class:!0,"data-svelte-h":!0}),B(p)!=="svelte-3drjdf"&&(p.textContent=C),F.forEach(f),o=P(j),h=u(j,"SPAN",{class:!0});var K=b(h);g=U(K,I),K.forEach(f),v=P(j),y=u(j,"DIV",{class:!0});var W=b(y);D.l(W),W.forEach(f),k=P(j),j.forEach(f),this.h()},h(){r(n,"class","svelte-1g205n6"),r(p,"class","remove-rule svelte-1g205n6"),r(e,"class","rule-header svelte-1g205n6"),r(h,"class","rule-description svelte-1g205n6"),r(y,"class","rule-input svelte-1g205n6"),r(t,"class","rule-item active svelte-1g205n6")},m(V,j){R(V,t,j),a(t,e),a(e,n),a(n,i),a(e,s),a(e,p),a(t,o),a(t,h),a(h,g),a(t,v),a(t,y),D.m(y,null),a(t,k),T||(m=q(p,"click",O),T=!0)},p(V,j){l=V,D.p(l,j)},d(V){V&&f(t),D.d(),T=!1,m()}}}function Zt(l){let t,e,n;function c(){l[30].call(t,l[38])}return{c(){t=d("input"),this.h()},l(i){t=u(i,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){r(t,"type","text"),r(t,"placeholder","Enter value"),r(t,"class","svelte-1g205n6")},m(i,s){R(i,t,s),X(t,l[5].policy[l[38].key]),e||(n=q(t,"input",c),e=!0)},p(i,s){l=i,s[0]&160&&t.value!==l[5].policy[l[38].key]&&X(t,l[5].policy[l[38].key])},d(i){i&&f(t),e=!1,n()}}}function xt(l){let t,e,n,c;function i(...s){return l[29](l[38],...s)}return{c(){t=d("textarea"),this.h()},l(s){t=u(s,"TEXTAREA",{rows:!0,placeholder:!0,class:!0}),b(t).forEach(f),this.h()},h(){t.value=e=Ke(l[5].policy[l[38].key]||{}),r(t,"rows","3"),r(t,"placeholder","JSON object"),r(t,"class","svelte-1g205n6")},m(s,p){R(s,t,p),n||(c=q(t,"input",i),n=!0)},p(s,p){l=s,p[0]&32&&e!==(e=Ke(l[5].policy[l[38].key]||{}))&&(t.value=e)},d(s){s&&f(t),n=!1,c()}}}function $t(l){let t,e,n,c;function i(...s){return l[28](l[38],...s)}return{c(){t=d("input"),this.h()},l(s){t=u(s,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){r(t,"type","text"),t.value=e=Ke(l[5].policy[l[38].key]||[]),r(t,"placeholder","Comma-separated values"),r(t,"class","svelte-1g205n6")},m(s,p){R(s,t,p),n||(c=q(t,"input",i),n=!0)},p(s,p){l=s,p[0]&32&&e!==(e=Ke(l[5].policy[l[38].key]||[]))&&t.value!==e&&(t.value=e)},d(s){s&&f(t),n=!1,c()}}}function el(l){let t,e,n;function c(){l[27].call(t,l[38])}return{c(){t=d("input"),this.h()},l(i){t=u(i,"INPUT",{type:!0,class:!0}),this.h()},h(){r(t,"type","number"),r(t,"class","svelte-1g205n6")},m(i,s){R(i,t,s),X(t,l[5].policy[l[38].key]),e||(n=q(t,"input",c),e=!0)},p(i,s){l=i,s[0]&160&&qt(t.value)!==l[5].policy[l[38].key]&&X(t,l[5].policy[l[38].key])},d(i){i&&f(t),e=!1,n()}}}function tl(l){let t,e,n="True",c,i="False",s,p;function C(){l[26].call(t,l[38])}return{c(){t=d("select"),e=d("option"),e.textContent=n,c=d("option"),c.textContent=i,this.h()},l(o){t=u(o,"SELECT",{class:!0});var h=b(t);e=u(h,"OPTION",{"data-svelte-h":!0}),B(e)!=="svelte-1wpj7a"&&(e.textContent=n),c=u(h,"OPTION",{"data-svelte-h":!0}),B(c)!=="svelte-1v2w52"&&(c.textContent=i),h.forEach(f),this.h()},h(){e.__value=!0,X(e,e.__value),c.__value=!1,X(c,c.__value),r(t,"class","svelte-1g205n6"),l[5].policy[l[38].key]===void 0&&dt(C)},m(o,h){R(o,t,h),a(t,e),a(t,c),Pe(t,l[5].policy[l[38].key],!0),s||(p=q(t,"change",C),s=!0)},p(o,h){l=o,h[0]&160&&Pe(t,l[5].policy[l[38].key])},d(o){o&&f(t),s=!1,p()}}}function Bt(l){let t,e;function n(s,p){return p[0]&32&&(t=null),t==null&&(t=!!s[5].policy.hasOwnProperty(s[38].key)),t?Yt:Wt}let c=n(l,[-1,-1]),i=c(l);return{c(){i.c(),e=Xe()},l(s){i.l(s),e=Xe()},m(s,p){i.m(s,p),R(s,e,p)},p(s,p){c===(c=n(s,p))&&i?i.p(s,p):(i.d(1),i=c(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){s&&f(e),i.d(s)}}}function Rt(l){let t,e,n=l[34]+"",c,i,s,p,C=we(l[35]),o=[];for(let h=0;h<C.length;h+=1)o[h]=Bt(At(l,C,h));return{c(){t=d("div"),e=d("h3"),c=J(n),i=w(),s=d("div");for(let h=0;h<o.length;h+=1)o[h].c();p=w(),this.h()},l(h){t=u(h,"DIV",{class:!0});var I=b(t);e=u(I,"H3",{class:!0});var g=b(e);c=U(g,n),g.forEach(f),i=P(I),s=u(I,"DIV",{class:!0});var v=b(s);for(let y=0;y<o.length;y+=1)o[y].l(v);v.forEach(f),p=P(I),I.forEach(f),this.h()},h(){r(e,"class","svelte-1g205n6"),r(s,"class","rules-grid svelte-1g205n6"),r(t,"class","rule-category svelte-1g205n6")},m(h,I){R(h,t,I),a(t,e),a(e,c),a(t,i),a(t,s);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(s,null);a(t,p)},p(h,I){if(I[0]&15520){C=we(h[35]);let g;for(g=0;g<C.length;g+=1){const v=At(h,C,g);o[g]?o[g].p(v,I):(o[g]=Bt(v),o[g].c(),o[g].m(s,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=C.length}},d(h){h&&f(t),ct(o,h)}}}function ll(l){let t;return{c(){t=J("Create Policy")},l(e){t=U(e,"Create Policy")},m(e,n){R(e,t,n)},d(e){e&&f(t)}}}function sl(l){let t,e="‚ö™",n;return{c(){t=d("span"),t.textContent=e,n=J(`
        Creating Policy...`),this.h()},l(c){t=u(c,"SPAN",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-156g31a"&&(t.textContent=e),n=U(c,`
        Creating Policy...`),this.h()},h(){r(t,"class","spinner svelte-1g205n6")},m(c,i){R(c,t,i),R(c,n,i)},d(c){c&&(f(t),f(n))}}}function nl(l){let t,e,n,c='<div class="breadcrumb svelte-1g205n6"><a href="/policy" class="svelte-1g205n6">üõ°Ô∏è Policies</a> / <span class="svelte-1g205n6">Create New Policy</span></div> <h1 class="svelte-1g205n6">Create New Policy</h1> <p class="svelte-1g205n6">Configure a new data governance policy with custom rules or start from a template.</p>',i,s,p,C="Create Policy",o,h,I="Choose how to create your policy: use a template, import JSON, or start from scratch.",g,v,y,k,T,m,O,S,L,D,V,j,F=Object.keys(l[5].policy).length>0,x,K,W,Le="Basic Settings",Te,Y,te,ne,Se="Policy Name *",Ie,Q,je,_,A,Z="Status",Oe,$,ae,pt="Enabled",oe,ft="Disabled",Qe,ce,fe,ht="Description",We,le,Ye,ee,he,_t="Policy Rules",Ze,_e,vt="Configure specific rules for your policy. Rules determine when to allow, warn, or block data access.",xe,$e,ue,ve,yt="Policy JSON Preview",et,ye,me,Ae,De=JSON.stringify(l[5].policy,null,2)+"",Ve,tt,de,pe,mt="Cancel",lt,se,Be,st,gt;function bt(E,M){if(E[4]==="template")return Qt;if(E[4]==="json")return Kt}let ge=bt(l),z=ge&&ge(l),G=F&&Vt(l),be=we(Object.entries(l[7])),H=[];for(let E=0;E<be.length;E+=1)H[E]=Rt(Ot(l,be,E));function kt(E,M){return E[0]?sl:ll}let Re=kt(l),ie=Re(l);return{c(){t=w(),e=d("div"),n=d("div"),n.innerHTML=c,i=w(),s=d("div"),p=d("h2"),p.textContent=C,o=w(),h=d("p"),h.textContent=I,g=w(),v=d("div"),y=d("div"),k=d("button"),T=J("üìÑ Templates"),O=w(),S=d("button"),L=J("üîß Import JSON"),V=w(),z&&z.c(),j=w(),G&&G.c(),x=w(),K=d("div"),W=d("h2"),W.textContent=Le,Te=w(),Y=d("div"),te=d("div"),ne=d("label"),ne.textContent=Se,Ie=w(),Q=d("input"),je=w(),_=d("div"),A=d("label"),A.textContent=Z,Oe=w(),$=d("select"),ae=d("option"),ae.textContent=pt,oe=d("option"),oe.textContent=ft,Qe=w(),ce=d("div"),fe=d("label"),fe.textContent=ht,We=w(),le=d("textarea"),Ye=w(),ee=d("div"),he=d("h2"),he.textContent=_t,Ze=w(),_e=d("p"),_e.textContent=vt,xe=w();for(let E=0;E<H.length;E+=1)H[E].c();$e=w(),ue=d("div"),ve=d("h2"),ve.textContent=yt,et=w(),ye=d("div"),me=d("pre"),Ae=d("code"),Ve=J(De),tt=w(),de=d("div"),pe=d("a"),pe.textContent=mt,lt=w(),se=d("button"),ie.c(),this.h()},l(E){Ft("svelte-gxgsvy",document.head).forEach(f),t=P(E),e=u(E,"DIV",{class:!0});var N=b(e);n=u(N,"DIV",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-aly4l1"&&(n.innerHTML=c),i=P(N),s=u(N,"DIV",{class:!0});var re=b(s);p=u(re,"H2",{class:!0,"data-svelte-h":!0}),B(p)!=="svelte-1ev1xgo"&&(p.textContent=C),o=P(re),h=u(re,"P",{class:!0,"data-svelte-h":!0}),B(h)!=="svelte-fexszo"&&(h.textContent=I),g=P(re),v=u(re,"DIV",{class:!0});var ke=b(v);y=u(ke,"DIV",{class:!0});var qe=b(y);k=u(qe,"BUTTON",{class:!0});var Ct=b(k);T=U(Ct,"üìÑ Templates"),Ct.forEach(f),O=P(qe),S=u(qe,"BUTTON",{class:!0});var Et=b(S);L=U(Et,"üîß Import JSON"),Et.forEach(f),qe.forEach(f),V=P(ke),z&&z.l(ke),j=P(ke),G&&G.l(ke),ke.forEach(f),re.forEach(f),x=P(N),K=u(N,"DIV",{class:!0});var Me=b(K);W=u(Me,"H2",{class:!0,"data-svelte-h":!0}),B(W)!=="svelte-11d4akh"&&(W.textContent=Le),Te=P(Me),Y=u(Me,"DIV",{class:!0});var Ce=b(Y);te=u(Ce,"DIV",{class:!0});var Ue=b(te);ne=u(Ue,"LABEL",{class:!0,"data-svelte-h":!0}),B(ne)!=="svelte-1rgz61b"&&(ne.textContent=Se),Ie=P(Ue),Q=u(Ue,"INPUT",{type:!0,placeholder:!0,class:!0}),Ue.forEach(f),je=P(Ce),_=u(Ce,"DIV",{class:!0});var Je=b(_);A=u(Je,"LABEL",{class:!0,"data-svelte-h":!0}),B(A)!=="svelte-akrz1q"&&(A.textContent=Z),Oe=P(Je),$=u(Je,"SELECT",{class:!0});var nt=b($);ae=u(nt,"OPTION",{"data-svelte-h":!0}),B(ae)!=="svelte-9v0opp"&&(ae.textContent=pt),oe=u(nt,"OPTION",{"data-svelte-h":!0}),B(oe)!=="svelte-17vl8k9"&&(oe.textContent=ft),nt.forEach(f),Je.forEach(f),Qe=P(Ce),ce=u(Ce,"DIV",{class:!0});var Fe=b(ce);fe=u(Fe,"LABEL",{class:!0,"data-svelte-h":!0}),B(fe)!=="svelte-yaz8sq"&&(fe.textContent=ht),We=P(Fe),le=u(Fe,"TEXTAREA",{rows:!0,placeholder:!0,class:!0}),b(le).forEach(f),Fe.forEach(f),Ce.forEach(f),Me.forEach(f),Ye=P(N),ee=u(N,"DIV",{class:!0});var Ee=b(ee);he=u(Ee,"H2",{class:!0,"data-svelte-h":!0}),B(he)!=="svelte-qvhyiz"&&(he.textContent=_t),Ze=P(Ee),_e=u(Ee,"P",{class:!0,"data-svelte-h":!0}),B(_e)!=="svelte-y6p2q4"&&(_e.textContent=vt),xe=P(Ee);for(let at=0;at<H.length;at+=1)H[at].l(Ee);Ee.forEach(f),$e=P(N),ue=u(N,"DIV",{class:!0});var He=b(ue);ve=u(He,"H2",{class:!0,"data-svelte-h":!0}),B(ve)!=="svelte-tud4i"&&(ve.textContent=yt),et=P(He),ye=u(He,"DIV",{class:!0});var Pt=b(ye);me=u(Pt,"PRE",{class:!0});var wt=b(me);Ae=u(wt,"CODE",{});var Tt=b(Ae);Ve=U(Tt,De),Tt.forEach(f),wt.forEach(f),Pt.forEach(f),He.forEach(f),tt=P(N),de=u(N,"DIV",{class:!0});var ze=b(de);pe=u(ze,"A",{href:!0,class:!0,"data-svelte-h":!0}),B(pe)!=="svelte-153uyk2"&&(pe.textContent=mt),lt=P(ze),se=u(ze,"BUTTON",{class:!0});var It=b(se);ie.l(It),It.forEach(f),ze.forEach(f),N.forEach(f),this.h()},h(){document.title="Create New Policy - Gitdata",r(n,"class","header-section svelte-1g205n6"),r(p,"class","svelte-1g205n6"),r(h,"class","section-description svelte-1g205n6"),r(k,"class",m="method-tab "+(l[4]==="template"?"active":"")+" svelte-1g205n6"),r(S,"class",D="method-tab "+(l[4]==="json"?"active":"")+" svelte-1g205n6"),r(y,"class","method-tabs svelte-1g205n6"),r(v,"class","import-method-selector svelte-1g205n6"),r(s,"class","section svelte-1g205n6"),r(W,"class","svelte-1g205n6"),r(ne,"class","svelte-1g205n6"),r(Q,"type","text"),r(Q,"placeholder","Enter policy name"),Q.required=!0,r(Q,"class","svelte-1g205n6"),r(te,"class","form-group svelte-1g205n6"),r(A,"class","svelte-1g205n6"),ae.__value=!0,X(ae,ae.__value),oe.__value=!1,X(oe,oe.__value),r($,"class","svelte-1g205n6"),l[5].enabled===void 0&&dt(()=>l[23].call($)),r(_,"class","form-group svelte-1g205n6"),r(fe,"class","svelte-1g205n6"),r(le,"rows","3"),r(le,"placeholder","Describe what this policy does and when it applies"),r(le,"class","svelte-1g205n6"),r(ce,"class","form-group full-width svelte-1g205n6"),r(Y,"class","form-grid svelte-1g205n6"),r(K,"class","section svelte-1g205n6"),r(he,"class","svelte-1g205n6"),r(_e,"class","section-description svelte-1g205n6"),r(ee,"class","section svelte-1g205n6"),r(ve,"class","svelte-1g205n6"),r(me,"class","svelte-1g205n6"),r(ye,"class","json-view svelte-1g205n6"),r(ue,"class","section svelte-1g205n6"),r(pe,"href","/policy"),r(pe,"class","btn secondary svelte-1g205n6"),r(se,"class","btn primary svelte-1g205n6"),se.disabled=Be=l[0]||!l[5].name.trim(),r(de,"class","actions svelte-1g205n6"),r(e,"class","policy-new svelte-1g205n6")},m(E,M){R(E,t,M),R(E,e,M),a(e,n),a(e,i),a(e,s),a(s,p),a(s,o),a(s,h),a(s,g),a(s,v),a(v,y),a(y,k),a(k,T),a(y,O),a(y,S),a(S,L),a(v,V),z&&z.m(v,null),a(v,j),G&&G.m(v,null),a(e,x),a(e,K),a(K,W),a(K,Te),a(K,Y),a(Y,te),a(te,ne),a(te,Ie),a(te,Q),X(Q,l[5].name),a(Y,je),a(Y,_),a(_,A),a(_,Oe),a(_,$),a($,ae),a($,oe),Pe($,l[5].enabled,!0),a(Y,Qe),a(Y,ce),a(ce,fe),a(ce,We),a(ce,le),X(le,l[5].description),a(e,Ye),a(e,ee),a(ee,he),a(ee,Ze),a(ee,_e),a(ee,xe);for(let N=0;N<H.length;N+=1)H[N]&&H[N].m(ee,null);a(e,$e),a(e,ue),a(ue,ve),a(ue,et),a(ue,ye),a(ye,me),a(me,Ae),a(Ae,Ve),a(e,tt),a(e,de),a(de,pe),a(de,lt),a(de,se),ie.m(se,null),st||(gt=[q(k,"click",l[17]),q(S,"click",l[18]),q(Q,"input",l[22]),q($,"change",l[23]),q(le,"input",l[24]),q(se,"click",l[9])],st=!0)},p(E,M){if(M[0]&16&&m!==(m="method-tab "+(E[4]==="template"?"active":"")+" svelte-1g205n6")&&r(k,"class",m),M[0]&16&&D!==(D="method-tab "+(E[4]==="json"?"active":"")+" svelte-1g205n6")&&r(S,"class",D),ge===(ge=bt(E))&&z?z.p(E,M):(z&&z.d(1),z=ge&&ge(E),z&&(z.c(),z.m(v,j))),M[0]&32&&(F=Object.keys(E[5].policy).length>0),F?G?G.p(E,M):(G=Vt(E),G.c(),G.m(v,null)):G&&(G.d(1),G=null),M[0]&32&&Q.value!==E[5].name&&X(Q,E[5].name),M[0]&32&&Pe($,E[5].enabled),M[0]&32&&X(le,E[5].description),M[0]&15520){be=we(Object.entries(E[7]));let N;for(N=0;N<be.length;N+=1){const re=Ot(E,be,N);H[N]?H[N].p(re,M):(H[N]=Rt(re),H[N].c(),H[N].m(ee,null))}for(;N<H.length;N+=1)H[N].d(1);H.length=be.length}M[0]&32&&De!==(De=JSON.stringify(E[5].policy,null,2)+"")&&Ne(Ve,De),Re!==(Re=kt(E))&&(ie.d(1),ie=Re(E),ie&&(ie.c(),ie.m(se,null))),M[0]&33&&Be!==(Be=E[0]||!E[5].name.trim())&&(se.disabled=Be)},i:Ge,o:Ge,d(E){E&&(f(t),f(e)),z&&z.d(),G&&G.d(),ct(H,E),ie.d(),st=!1,ut(gt)}}}function Ke(l){return Array.isArray(l)?l.join(", "):typeof l=="object"&&l!==null?JSON.stringify(l,null,2):String(l)}function al(l,t,e){let n;Ht(l,Xt,_=>e(32,n=_));let c=!1,i="",s="",p="",C="template",o={name:"",description:"",enabled:!0,policy:{}};const h=[{id:"banking-compliance",name:"Banking Compliance (Ultra-Policy)",description:"Strict compliance for banking/financial documents with EU restrictions",category:"compliance",template:{minConfs:12,classificationAllowList:["restricted"],allowRecalled:!1,licenseAllowList:["Internal-Banking-Use-Only"],geoOriginAllowList:["EU"],maxPricePerByte:.5,maxTotalCostForLineage:25e4,maxDataAgeSeconds:3600,blockIfInThreatFeed:!0}},{id:"general-content",name:"General Content Policy",description:"Standard policy for general documents and media files",category:"general",template:{minConfs:6,allowRecalled:!1,classificationAllowList:["public","internal"],maxLineageDepth:10,maxDataAgeSeconds:30*24*60*60,maxPricePerByte:1,maxTotalCostForLineage:5e4}},{id:"privacy-protection",name:"Privacy Protection",description:"Privacy-focused policy for sensitive documents",category:"privacy",template:{minConfs:6,allowRecalled:!1,blockIfInThreatFeed:!0,maxPricePerByte:2}}],I={"SPV & Confirmations":[{key:"minConfs",label:"Min Confirmations",type:"number",description:"Minimum SPV confirmations required"},{key:"allowRecalled",label:"Allow Recalled",type:"boolean",description:"Allow recalled/flagged data"}],"Producer & Provenance":[{key:"producerAllowList",label:"Producer Allow List",type:"array",description:"Allowed producer public keys"},{key:"producerBlockList",label:"Producer Block List",type:"array",description:"Blocked producer public keys"},{key:"maxLineageDepth",label:"Max Lineage Depth",type:"number",description:"Maximum allowed lineage depth"},{key:"requiredAncestor",label:"Required Ancestor",type:"string",description:"Required ancestor version ID"}],"Compliance & Legal":[{key:"classificationAllowList",label:"Classification Allow List",type:"array",description:"Allowed data classifications"},{key:"licenseAllowList",label:"License Allow List",type:"array",description:"Allowed data licenses"},{key:"geoOriginAllowList",label:"Geo Origin Allow List",type:"array",description:"Allowed geographic origins"}],"Content & Schema":[{key:"requiredSchemaHash",label:"Required Schema Hash",type:"string",description:"Required exact schema hash"},{key:"requiredMimeTypes",label:"Required MIME Types",type:"array",description:"Required MIME types"},{key:"requiredOntologyTags",label:"Required Ontology Tags",type:"array",description:"Required ontology tags"}],"Economics & Operations":[{key:"maxPricePerByte",label:"Max Price Per Byte",type:"number",description:"Maximum price per byte limit"},{key:"maxTotalCostForLineage",label:"Max Total Cost",type:"number",description:"Maximum total lineage cost"},{key:"maxDataAgeSeconds",label:"Max Data Age (seconds)",type:"number",description:"Maximum data age in seconds"}],"Security & Privacy":[{key:"blockIfInThreatFeed",label:"Block If In Threat Feed",type:"boolean",description:"Block if found in threat feeds"}]};zt(()=>{const _=n.url.searchParams.get("template");_&&g(_)});function g(_){const A=h.find(Z=>Z.id===_);A&&(e(1,i=_),e(5,o.name=A.name,o),e(5,o.description=A.description,o),e(5,o.policy={...A.template},o))}function v(_){_===""?(e(5,o={name:"",description:"",enabled:!0,policy:{}}),e(1,i="")):g(_)}async function y(){if(!o.name.trim()){alert("Please enter a policy name");return}e(0,c=!0);try{const _=await fetch("/policies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(_.ok){const A=await _.json();it(`/policy/${A.policyId||"new-policy"}`)}else it(`/policy/pol_new_${Date.now()}`)}catch(_){console.error("Failed to create policy:",_),it(`/policy/pol_new_${Date.now()}`)}finally{e(0,c=!1)}}function k(_,A){typeof A=="string"?e(5,o.policy[_]=A.split(",").map(Z=>Z.trim()).filter(Z=>Z),o):e(5,o.policy[_]=A,o)}function T(_,A){try{e(5,o.policy[_]=JSON.parse(A),o)}catch{e(5,o.policy[_]=A,o)}}function m(_){delete o.policy[_],e(5,o.policy={...o.policy},o)}function O(_,A){A===void 0&&(A=""),e(5,o.policy[_]=A,o),e(5,o.policy={...o.policy},o)}function S(){e(3,p="");try{const _=JSON.parse(s);if(typeof _!="object"||_===null)throw new Error("Policy must be a valid JSON object");e(5,o.policy=_,o),_.name&&!o.name&&e(5,o.name=_.name,o),_.description&&!o.description&&e(5,o.description=_.description,o),e(2,s=""),e(4,C="template"),e(1,i="custom")}catch(_){e(3,p=_.message)}}function L(_){const A=_.target.files[0];if(!A)return;const Z=new FileReader;Z.onload=Oe=>{e(2,s=Oe.target.result),S()},Z.readAsText(A),_.target.value=""}function D(){e(5,o={name:"",description:"",enabled:!0,policy:{}}),e(1,i=""),e(2,s=""),e(3,p="")}const V=()=>e(4,C="template"),j=()=>e(4,C="json");function F(){i=ot(this),e(1,i),e(6,h)}const x=()=>v(i);function K(){s=this.value,e(2,s)}function W(){o.name=this.value,e(5,o)}function Le(){o.enabled=ot(this),e(5,o)}function Te(){o.description=this.value,e(5,o)}const Y=_=>m(_.key);function te(_){o.policy[_.key]=ot(this),e(5,o)}function ne(_){o.policy[_.key]=qt(this.value),e(5,o)}const Se=(_,A)=>k(_.key,A.target.value),Ie=(_,A)=>T(_.key,A.target.value);function Q(_){o.policy[_.key]=this.value,e(5,o)}return[c,i,s,p,C,o,h,I,v,y,k,T,m,O,S,L,D,V,j,F,x,K,W,Le,Te,Y,te,ne,Se,Ie,Q,_=>O(_.key,_.type==="boolean"?!1:_.type==="number"?0:_.type==="array"?[]:_.type==="object"?{}:"")]}class dl extends Mt{constructor(t){super(),Ut(this,t,al,nl,Jt,{},null,[-1,-1])}}export{dl as component};
