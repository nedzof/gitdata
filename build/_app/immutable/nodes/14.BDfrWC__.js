import{S as nt,i as rt,s as it,n as ze,d as v,r as ot,z as Qe,b as he,c as t,o as re,p as a,m as ue,B as ut,e as l,f as p,q as x,h as g,u as We,j as n,k as _,v as vt,A as Ie,C as dt,E as ft,I as ht,D as mt,a as ae,g as W,t as G,w as pt,F as Ge,Q as gt,J as _t,K as yt,T as bt,y as Ct,U as St,R as At}from"../chunks/BOFvEgh9.js";import"../chunks/IHki7fMi.js";import{e as Xe}from"../chunks/D6YF6ztN.js";import{w as Pt}from"../chunks/O6ZtjPQ5.js";import{walletService as Ye,generateAuthHeaders as Et}from"../chunks/BR2BQ31v.js";function ct(){{const i=window.location.host;return i.includes("localhost:3000")||i.includes("127.0.0.1:3000"),"http://localhost:8788"}}const Dt=Pt(ct());class It{constructor(){this.baseUrl=ct(),Dt.subscribe(e=>{this.baseUrl=e}),console.log("ðŸš€ D06APIClient created with baseUrl:",this.baseUrl)}async request(e,s={}){const o=`${this.baseUrl}${e}`,c={headers:{"Content-Type":"application/json",...s.headers},...s};c.body&&typeof c.body=="object"&&(c.body=JSON.stringify(c.body));try{const r=await fetch(o,c),d=await r.json();if(!r.ok)throw new Error(d.error||`HTTP ${r.status}: ${d.message||"Unknown error"}`);return d}catch(r){throw console.error("API Request failed:",r),r}}async searchListings(e="",s=10,o=0){const c=new URLSearchParams;return e&&c.append("q",e),c.append("limit",s.toString()),c.append("offset",o.toString()),this.request(`/listings?${c}`)}async getListings(){return this.request("/listings")}async getListingDetail(e){return this.request(`/listings/${encodeURIComponent(e)}`)}async registerAgent(e,s,o=[]){return this.request("/agents/register",{method:"POST",body:{name:e,webhookUrl:s,capabilities:o}})}async searchAgents(e=""){const s=new URLSearchParams;return e&&s.append("q",e),this.request(`/agents/search?${s}`)}async getAgents(){return this.request("/agents/search")}async createRule(e,s="",o){const c={type:"ready",predicate:{}},r={source:"search",query:{q:s},limit:10},d=[{action:"notify",agentId:o}];return this.request("/rules",{method:"POST",body:{name:e,when:c,find:r,actions:d}})}async getRules(){return this.request("/rules")}async runRule(e){return this.request(`/rules/${encodeURIComponent(e)}/run`,{method:"POST"})}async deleteRule(e){return this.request(`/rules/${encodeURIComponent(e)}`,{method:"DELETE"})}async getJobs(e=""){const s=new URLSearchParams;return e&&s.append("state",e),this.request(`/jobs?${s}`)}async createPolicy(e,s){return this.request("/policies",{method:"POST",body:{name:e,policy:s}})}async getPolicies(){return this.request("/policies")}async getPolicy(e){return this.request(`/policies/${encodeURIComponent(e)}`)}async updatePolicy(e,s){return this.request(`/policies/${encodeURIComponent(e)}`,{method:"PATCH",body:s})}async deletePolicy(e){return this.request(`/policies/${encodeURIComponent(e)}`,{method:"DELETE"})}async evaluatePolicy(e,s,o){return this.request("/policies/evaluate",{method:"POST",body:{versionId:e,policyId:s,policy:o}})}async testPolicy(e,s){return this.request("/ready",{method:"POST",body:{versionId:s,policyId:e}})}async getHealth(){return this.request("/health")}async processPayment(e,s){return console.log("ðŸ”¥ D06 processPayment called:",e),this.request("/v1/payments/pay",{method:"POST",headers:s,body:e})}async getReceipt(e){return this.request(`/v1/payments/receipts/${e}`)}async verifyPayment(e){return console.log("ðŸ”¥ D06 verifyPayment called:",e),this.request("/v1/payments/verify",{method:"POST",body:e})}async authorizeAgent(e,s){return console.log("ðŸ”¥ D06 authorizeAgent called:",e),this.request("/v1/payments/agents/authorize",{method:"POST",headers:s,body:e})}async getAgentAuthorization(e){return console.log("ðŸ”¥ D06 getAgentAuthorization called:",e),this.request(`/v1/payments/agents/${e}/authorization`)}async getAgentSpending(e,s){const o=s?`?timeframe=${s}`:"";return this.request(`/v1/payments/agents/${e}/spending${o}`)}async processAgentPayment(e,s){return this.request(`/v1/payments/agents/${e}/pay`,{method:"POST",body:s})}async getAgentSummary(){return console.log("ðŸ”¥ D06 getAgentSummary called"),this.request("/v1/payments/agents/summary")}async getRevenueAnalytics(e){const s=e?`?${new URLSearchParams(e)}`:"";return this.request(`/v1/revenue/analytics${s}`)}async getRevenueSummary(e){console.log("ðŸ”¥ D06 getRevenueSummary called with timeframe:",e);const s=e?`?timeframe=${e}`:"";return this.request(`/v1/revenue/summary${s}`)}async getProducerRevenue(e){return this.request(`/v1/revenue/producers/${e}`)}async initiateSettlement(e,s){return this.request("/v1/revenue/settlements",{method:"POST",headers:s,body:e})}async getSettlement(e){return this.request(`/v1/revenue/settlements/${e}`)}}const Oe=new It;console.log("âœ… D06 API Client v2.0.0 loaded successfully!");console.log("ðŸ”¥ Available D06 methods:",["getRevenueSummary","getAgentSummary","processPayment","verifyPayment","authorizeAgent","getAgentAuthorization"]);function Tt(){return!0}function Ze(i,e,s){const o=i.slice();return o[20]=e[s],o}function qt(i){let e,s,o=i[0]&&et(i),c=i[1]&&tt(i);return{c(){e=n("div"),o&&o.c(),s=_(),c&&c.c(),this.h()},l(r){e=l(r,"DIV",{class:!0});var d=p(e);o&&o.l(d),s=g(d),c&&c.l(d),d.forEach(v),this.h()},h(){a(e,"class","dashboard-grid svelte-fg3va4")},m(r,d){he(r,e,d),o&&o.m(e,null),t(e,s),c&&c.m(e,null)},p(r,d){r[0]?o?o.p(r,d):(o=et(r),o.c(),o.m(e,s)):o&&(o.d(1),o=null),r[1]?c?c.p(r,d):(c=tt(r),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(r){r&&v(e),o&&o.d(),c&&c.d()}}}function Lt(i){let e,s,o="Error Loading Dashboard",c,r,d,y,S,m="Retry",u,h;return{c(){e=n("div"),s=n("h2"),s.textContent=o,c=_(),r=n("p"),d=G(i[3]),y=_(),S=n("button"),S.textContent=m,this.h()},l(b){e=l(b,"DIV",{class:!0});var f=p(e);s=l(f,"H2",{"data-svelte-h":!0}),x(s)!=="svelte-1php5l4"&&(s.textContent=o),c=g(f),r=l(f,"P",{});var q=p(r);d=W(q,i[3]),q.forEach(v),y=g(f),S=l(f,"BUTTON",{class:!0,"data-svelte-h":!0}),x(S)!=="svelte-6k591k"&&(S.textContent=m),f.forEach(v),this.h()},h(){a(S,"class","btn-secondary svelte-fg3va4"),a(e,"class","error-state svelte-fg3va4")},m(b,f){he(b,e,f),t(e,s),t(e,c),t(e,r),t(r,d),t(e,y),t(e,S),u||(h=re(S,"click",i[7]),u=!0)},p(b,f){f&8&&ae(d,b[3])},d(b){b&&v(e),u=!1,h()}}}function Nt(i){let e,s='<div class="spinner svelte-fg3va4"></div> <p>Loading payment dashboard...</p>';return{c(){e=n("div"),e.innerHTML=s,this.h()},l(o){e=l(o,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-m1jnjj"&&(e.innerHTML=s),this.h()},h(){a(e,"class","loading-state svelte-fg3va4")},m(o,c){he(o,e,c)},p:ze,d(o){o&&v(e)}}}function et(i){let e,s,o,c,r,d,y,S,m,u="Total Revenue",h,b,f=le(i[0].metrics.totalRevenueSatoshis)+"",q,A,O,N,k="Net Revenue",$,M,w=le(i[0].metrics.netRevenueSatoshis)+"",R,D,P,T,z="Platform Fees",I,L,C=le(i[0].metrics.platformFeeSatoshis)+"",E,te,K,V,ie="Agent Commissions",Y,Q,ve=le(i[0].metrics.agentCommissionSatoshis)+"",j,H,U,F,J,ye="Transactions",de,Z,oe=i[0].metrics.transactionCount+"",me,pe,B,ee,Ae="Active Days",be,X,ge=i[0].metrics.activeDays+"",_e,Ce,ce,fe,Pe="Daily Average",He,Ee,Te=le(i[0].metrics.averageDailyRevenue)+"",qe;return{c(){e=n("section"),s=n("h2"),o=G("Revenue Overview ("),c=G(i[4]),r=G(")"),d=_(),y=n("div"),S=n("div"),m=n("span"),m.textContent=u,h=_(),b=n("span"),q=G(f),A=_(),O=n("div"),N=n("span"),N.textContent=k,$=_(),M=n("span"),R=G(w),D=_(),P=n("div"),T=n("span"),T.textContent=z,I=_(),L=n("span"),E=G(C),te=_(),K=n("div"),V=n("span"),V.textContent=ie,Y=_(),Q=n("span"),j=G(ve),H=_(),U=n("div"),F=n("div"),J=n("span"),J.textContent=ye,de=_(),Z=n("span"),me=G(oe),pe=_(),B=n("div"),ee=n("span"),ee.textContent=Ae,be=_(),X=n("span"),_e=G(ge),Ce=_(),ce=n("div"),fe=n("span"),fe.textContent=Pe,He=_(),Ee=n("span"),qe=G(Te),this.h()},l(ne){e=l(ne,"SECTION",{class:!0});var se=p(e);s=l(se,"H2",{class:!0});var Le=p(s);o=W(Le,"Revenue Overview ("),c=W(Le,i[4]),r=W(Le,")"),Le.forEach(v),d=g(se),y=l(se,"DIV",{class:!0});var Se=p(y);S=l(Se,"DIV",{class:!0});var Ne=p(S);m=l(Ne,"SPAN",{class:!0,"data-svelte-h":!0}),x(m)!=="svelte-atpdae"&&(m.textContent=u),h=g(Ne),b=l(Ne,"SPAN",{class:!0});var Be=p(b);q=W(Be,f),Be.forEach(v),Ne.forEach(v),A=g(Se),O=l(Se,"DIV",{class:!0});var ke=p(O);N=l(ke,"SPAN",{class:!0,"data-svelte-h":!0}),x(N)!=="svelte-7284zf"&&(N.textContent=k),$=g(ke),M=l(ke,"SPAN",{class:!0});var Me=p(M);R=W(Me,w),Me.forEach(v),ke.forEach(v),D=g(Se),P=l(Se,"DIV",{class:!0});var we=p(P);T=l(we,"SPAN",{class:!0,"data-svelte-h":!0}),x(T)!=="svelte-18b9jjo"&&(T.textContent=z),I=g(we),L=l(we,"SPAN",{class:!0});var Fe=p(L);E=W(Fe,C),Fe.forEach(v),we.forEach(v),te=g(Se),K=l(Se,"DIV",{class:!0});var xe=p(K);V=l(xe,"SPAN",{class:!0,"data-svelte-h":!0}),x(V)!=="svelte-1l8p0rb"&&(V.textContent=ie),Y=g(xe),Q=l(xe,"SPAN",{class:!0});var je=p(Q);j=W(je,ve),je.forEach(v),xe.forEach(v),Se.forEach(v),H=g(se),U=l(se,"DIV",{class:!0});var De=p(U);F=l(De,"DIV",{class:!0});var Re=p(F);J=l(Re,"SPAN",{class:!0,"data-svelte-h":!0}),x(J)!=="svelte-1u06v1b"&&(J.textContent=ye),de=g(Re),Z=l(Re,"SPAN",{class:!0});var $e=p(Z);me=W($e,oe),$e.forEach(v),Re.forEach(v),pe=g(De),B=l(De,"DIV",{class:!0});var Ve=p(B);ee=l(Ve,"SPAN",{class:!0,"data-svelte-h":!0}),x(ee)!=="svelte-zxnlft"&&(ee.textContent=Ae),be=g(Ve),X=l(Ve,"SPAN",{class:!0});var Je=p(X);_e=W(Je,ge),Je.forEach(v),Ve.forEach(v),Ce=g(De),ce=l(De,"DIV",{class:!0});var Ue=p(ce);fe=l(Ue,"SPAN",{class:!0,"data-svelte-h":!0}),x(fe)!=="svelte-1q7q1qm"&&(fe.textContent=Pe),He=g(Ue),Ee=l(Ue,"SPAN",{class:!0});var Ke=p(Ee);qe=W(Ke,Te),Ke.forEach(v),Ue.forEach(v),De.forEach(v),se.forEach(v),this.h()},h(){a(s,"class","svelte-fg3va4"),a(m,"class","metric-label svelte-fg3va4"),a(b,"class","metric-value primary svelte-fg3va4"),a(S,"class","metric svelte-fg3va4"),a(N,"class","metric-label svelte-fg3va4"),a(M,"class","metric-value svelte-fg3va4"),a(O,"class","metric svelte-fg3va4"),a(T,"class","metric-label svelte-fg3va4"),a(L,"class","metric-value svelte-fg3va4"),a(P,"class","metric svelte-fg3va4"),a(V,"class","metric-label svelte-fg3va4"),a(Q,"class","metric-value svelte-fg3va4"),a(K,"class","metric svelte-fg3va4"),a(y,"class","metrics-grid svelte-fg3va4"),a(J,"class","metric-label svelte-fg3va4"),a(Z,"class","metric-value svelte-fg3va4"),a(F,"class","metric svelte-fg3va4"),a(ee,"class","metric-label svelte-fg3va4"),a(X,"class","metric-value svelte-fg3va4"),a(B,"class","metric svelte-fg3va4"),a(fe,"class","metric-label svelte-fg3va4"),a(Ee,"class","metric-value svelte-fg3va4"),a(ce,"class","metric svelte-fg3va4"),a(U,"class","metrics-grid svelte-fg3va4"),a(e,"class","card revenue-card svelte-fg3va4")},m(ne,se){he(ne,e,se),t(e,s),t(s,o),t(s,c),t(s,r),t(e,d),t(e,y),t(y,S),t(S,m),t(S,h),t(S,b),t(b,q),t(y,A),t(y,O),t(O,N),t(O,$),t(O,M),t(M,R),t(y,D),t(y,P),t(P,T),t(P,I),t(P,L),t(L,E),t(y,te),t(y,K),t(K,V),t(K,Y),t(K,Q),t(Q,j),t(e,H),t(e,U),t(U,F),t(F,J),t(F,de),t(F,Z),t(Z,me),t(U,pe),t(U,B),t(B,ee),t(B,be),t(B,X),t(X,_e),t(U,Ce),t(U,ce),t(ce,fe),t(ce,He),t(ce,Ee),t(Ee,qe)},p(ne,se){se&16&&ae(c,ne[4]),se&1&&f!==(f=le(ne[0].metrics.totalRevenueSatoshis)+"")&&ae(q,f),se&1&&w!==(w=le(ne[0].metrics.netRevenueSatoshis)+"")&&ae(R,w),se&1&&C!==(C=le(ne[0].metrics.platformFeeSatoshis)+"")&&ae(E,C),se&1&&ve!==(ve=le(ne[0].metrics.agentCommissionSatoshis)+"")&&ae(j,ve),se&1&&oe!==(oe=ne[0].metrics.transactionCount+"")&&ae(me,oe),se&1&&ge!==(ge=ne[0].metrics.activeDays+"")&&ae(_e,ge),se&1&&Te!==(Te=le(ne[0].metrics.averageDailyRevenue)+"")&&ae(qe,Te)},d(ne){ne&&v(e)}}}function tt(i){let e,s,o="Agent Payment Summary",c,r,d,y,S="Total Agents",m,u,h=i[1].totals.totalAgents+"",b,f,q,A,O="Active Agents",N,k,$=i[1].totals.activeAgents+"",M,w,R,D,P="Total Spent",T,z,I=le(i[1].totals.totalSpentAllAgents)+"",L,C,E,te,K="Average per Agent",V,ie,Y=le(i[1].totals.averageSpentPerAgent)+"",Q,ve,j=i[1].summary.length>0&&st(i);return{c(){e=n("section"),s=n("h2"),s.textContent=o,c=_(),r=n("div"),d=n("div"),y=n("span"),y.textContent=S,m=_(),u=n("span"),b=G(h),f=_(),q=n("div"),A=n("span"),A.textContent=O,N=_(),k=n("span"),M=G($),w=_(),R=n("div"),D=n("span"),D.textContent=P,T=_(),z=n("span"),L=G(I),C=_(),E=n("div"),te=n("span"),te.textContent=K,V=_(),ie=n("span"),Q=G(Y),ve=_(),j&&j.c(),this.h()},l(H){e=l(H,"SECTION",{class:!0});var U=p(e);s=l(U,"H2",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-1wswncn"&&(s.textContent=o),c=g(U),r=l(U,"DIV",{class:!0});var F=p(r);d=l(F,"DIV",{class:!0});var J=p(d);y=l(J,"SPAN",{class:!0,"data-svelte-h":!0}),x(y)!=="svelte-rzaaos"&&(y.textContent=S),m=g(J),u=l(J,"SPAN",{class:!0});var ye=p(u);b=W(ye,h),ye.forEach(v),J.forEach(v),f=g(F),q=l(F,"DIV",{class:!0});var de=p(q);A=l(de,"SPAN",{class:!0,"data-svelte-h":!0}),x(A)!=="svelte-4qnn3k"&&(A.textContent=O),N=g(de),k=l(de,"SPAN",{class:!0});var Z=p(k);M=W(Z,$),Z.forEach(v),de.forEach(v),w=g(F),R=l(F,"DIV",{class:!0});var oe=p(R);D=l(oe,"SPAN",{class:!0,"data-svelte-h":!0}),x(D)!=="svelte-1kwfh36"&&(D.textContent=P),T=g(oe),z=l(oe,"SPAN",{class:!0});var me=p(z);L=W(me,I),me.forEach(v),oe.forEach(v),C=g(F),E=l(F,"DIV",{class:!0});var pe=p(E);te=l(pe,"SPAN",{class:!0,"data-svelte-h":!0}),x(te)!=="svelte-ix25od"&&(te.textContent=K),V=g(pe),ie=l(pe,"SPAN",{class:!0});var B=p(ie);Q=W(B,Y),B.forEach(v),pe.forEach(v),F.forEach(v),ve=g(U),j&&j.l(U),U.forEach(v),this.h()},h(){a(s,"class","svelte-fg3va4"),a(y,"class","metric-label svelte-fg3va4"),a(u,"class","metric-value svelte-fg3va4"),a(d,"class","metric svelte-fg3va4"),a(A,"class","metric-label svelte-fg3va4"),a(k,"class","metric-value success svelte-fg3va4"),a(q,"class","metric svelte-fg3va4"),a(D,"class","metric-label svelte-fg3va4"),a(z,"class","metric-value svelte-fg3va4"),a(R,"class","metric svelte-fg3va4"),a(te,"class","metric-label svelte-fg3va4"),a(ie,"class","metric-value svelte-fg3va4"),a(E,"class","metric svelte-fg3va4"),a(r,"class","metrics-grid svelte-fg3va4"),a(e,"class","card agents-card svelte-fg3va4")},m(H,U){he(H,e,U),t(e,s),t(e,c),t(e,r),t(r,d),t(d,y),t(d,m),t(d,u),t(u,b),t(r,f),t(r,q),t(q,A),t(q,N),t(q,k),t(k,M),t(r,w),t(r,R),t(R,D),t(R,T),t(R,z),t(z,L),t(r,C),t(r,E),t(E,te),t(E,V),t(E,ie),t(ie,Q),t(e,ve),j&&j.m(e,null)},p(H,U){U&2&&h!==(h=H[1].totals.totalAgents+"")&&ae(b,h),U&2&&$!==($=H[1].totals.activeAgents+"")&&ae(M,$),U&2&&I!==(I=le(H[1].totals.totalSpentAllAgents)+"")&&ae(L,I),U&2&&Y!==(Y=le(H[1].totals.averageSpentPerAgent)+"")&&ae(Q,Y),H[1].summary.length>0?j?j.p(H,U):(j=st(H),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(H){H&&v(e),j&&j.d()}}}function st(i){let e,s,o="Agent Details",c,r,d,y="<span>Agent</span> <span>Status</span> <span>Spent</span> <span>Budget Used</span>",S,m=Xe(i[1].summary),u=[];for(let h=0;h<m.length;h+=1)u[h]=at(Ze(i,m,h));return{c(){e=n("div"),s=n("h3"),s.textContent=o,c=_(),r=n("div"),d=n("div"),d.innerHTML=y,S=_();for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=l(h,"DIV",{class:!0});var b=p(e);s=l(b,"H3",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-tms2kn"&&(s.textContent=o),c=g(b),r=l(b,"DIV",{class:!0});var f=p(r);d=l(f,"DIV",{class:!0,"data-svelte-h":!0}),x(d)!=="svelte-1s0igdg"&&(d.innerHTML=y),S=g(f);for(let q=0;q<u.length;q+=1)u[q].l(f);f.forEach(v),b.forEach(v),this.h()},h(){a(s,"class","svelte-fg3va4"),a(d,"class","table-header svelte-fg3va4"),a(r,"class","agents-table svelte-fg3va4"),a(e,"class","agents-list svelte-fg3va4")},m(h,b){he(h,e,b),t(e,s),t(e,c),t(e,r),t(r,d),t(r,S);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(r,null)},p(h,b){if(b&2){m=Xe(h[1].summary);let f;for(f=0;f<m.length;f+=1){const q=Ze(h,m,f);u[f]?u[f].p(q,b):(u[f]=at(q),u[f].c(),u[f].m(r,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=m.length}},d(h){h&&v(e),pt(u,h)}}}function at(i){var D;let e,s,o=(i[20].agentName||i[20].agentId)+"",c,r,d,y=i[20].status+"",S,m,u,h,b=le(i[20].totalSpentSatoshis)+"",f,q,A,O,N,k,$=(((D=i[20].budgetUtilization)==null?void 0:D.monthlyPercent)||0).toFixed(1)+"",M,w,R;return{c(){e=n("div"),s=n("span"),c=G(o),r=_(),d=n("span"),S=G(y),u=_(),h=n("span"),f=G(b),q=_(),A=n("span"),O=n("div"),N=n("div"),k=_(),M=G($),w=G("%"),R=_(),this.h()},l(P){e=l(P,"DIV",{class:!0});var T=p(e);s=l(T,"SPAN",{class:!0});var z=p(s);c=W(z,o),z.forEach(v),r=g(T),d=l(T,"SPAN",{class:!0});var I=p(d);S=W(I,y),I.forEach(v),u=g(T),h=l(T,"SPAN",{});var L=p(h);f=W(L,b),L.forEach(v),q=g(T),A=l(T,"SPAN",{class:!0});var C=p(A);O=l(C,"DIV",{class:!0});var E=p(O);N=l(E,"DIV",{class:!0,style:!0}),p(N).forEach(v),E.forEach(v),k=g(C),M=W(C,$),w=W(C,"%"),C.forEach(v),R=g(T),T.forEach(v),this.h()},h(){var P;a(s,"class","agent-name svelte-fg3va4"),a(d,"class",m="status status-"+i[20].status+" svelte-fg3va4"),a(N,"class","progress-fill svelte-fg3va4"),Ge(N,"width",Math.min(((P=i[20].budgetUtilization)==null?void 0:P.monthlyPercent)||0,100)+"%"),a(O,"class","progress-bar svelte-fg3va4"),a(A,"class","budget-usage svelte-fg3va4"),a(e,"class","table-row svelte-fg3va4")},m(P,T){he(P,e,T),t(e,s),t(s,c),t(e,r),t(e,d),t(d,S),t(e,u),t(e,h),t(h,f),t(e,q),t(e,A),t(A,O),t(O,N),t(A,k),t(A,M),t(A,w),t(e,R)},p(P,T){var z,I;T&2&&o!==(o=(P[20].agentName||P[20].agentId)+"")&&ae(c,o),T&2&&y!==(y=P[20].status+"")&&ae(S,y),T&2&&m!==(m="status status-"+P[20].status+" svelte-fg3va4")&&a(d,"class",m),T&2&&b!==(b=le(P[20].totalSpentSatoshis)+"")&&ae(f,b),T&2&&Ge(N,"width",Math.min(((z=P[20].budgetUtilization)==null?void 0:z.monthlyPercent)||0,100)+"%"),T&2&&$!==($=(((I=P[20].budgetUtilization)==null?void 0:I.monthlyPercent)||0).toFixed(1)+"")&&ae(M,$)},d(P){P&&v(e)}}}function lt(i){let e,s,o,c,r="Authorize Agent for Payments",d,y,S="Ã—",m,u,h,b,f="Agent ID",q,A,O,N,k,$="Max Payment per Transaction (satoshis)",M,w,R,D,P,T="Daily Spending Limit (satoshis)",z,I,L,C,E,te="Monthly Spending Limit (satoshis)",K,V,ie,Y,Q,ve="Expiration Date (optional)",j,H,U,F,J,ye="Cancel",de,Z,oe="Authorize Agent",me,pe;return{c(){e=n("div"),s=n("div"),o=n("header"),c=n("h2"),c.textContent=r,d=_(),y=n("button"),y.textContent=S,m=_(),u=n("form"),h=n("div"),b=n("label"),b.textContent=f,q=_(),A=n("input"),O=_(),N=n("div"),k=n("label"),k.textContent=$,M=_(),w=n("input"),R=_(),D=n("div"),P=n("label"),P.textContent=T,z=_(),I=n("input"),L=_(),C=n("div"),E=n("label"),E.textContent=te,K=_(),V=n("input"),ie=_(),Y=n("div"),Q=n("label"),Q.textContent=ve,j=_(),H=n("input"),U=_(),F=n("div"),J=n("button"),J.textContent=ye,de=_(),Z=n("button"),Z.textContent=oe,this.h()},l(B){e=l(B,"DIV",{class:!0});var ee=p(e);s=l(ee,"DIV",{class:!0});var Ae=p(s);o=l(Ae,"HEADER",{class:!0});var be=p(o);c=l(be,"H2",{class:!0,"data-svelte-h":!0}),x(c)!=="svelte-g8rrde"&&(c.textContent=r),d=g(be),y=l(be,"BUTTON",{class:!0,"data-svelte-h":!0}),x(y)!=="svelte-131wh4n"&&(y.textContent=S),be.forEach(v),m=g(Ae),u=l(Ae,"FORM",{class:!0});var X=p(u);h=l(X,"DIV",{class:!0});var ge=p(h);b=l(ge,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(b)!=="svelte-yuotec"&&(b.textContent=f),q=g(ge),A=l(ge,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ge.forEach(v),O=g(X),N=l(X,"DIV",{class:!0});var _e=p(N);k=l(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(k)!=="svelte-285kpa"&&(k.textContent=$),M=g(_e),w=l(_e,"INPUT",{id:!0,type:!0,min:!0,class:!0}),_e.forEach(v),R=g(X),D=l(X,"DIV",{class:!0});var Ce=p(D);P=l(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(P)!=="svelte-m7l3i5"&&(P.textContent=T),z=g(Ce),I=l(Ce,"INPUT",{id:!0,type:!0,min:!0,class:!0}),Ce.forEach(v),L=g(X),C=l(X,"DIV",{class:!0});var ce=p(C);E=l(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(E)!=="svelte-1t7w5ad"&&(E.textContent=te),K=g(ce),V=l(ce,"INPUT",{id:!0,type:!0,min:!0,class:!0}),ce.forEach(v),ie=g(X),Y=l(X,"DIV",{class:!0});var fe=p(Y);Q=l(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(Q)!=="svelte-k92drv"&&(Q.textContent=ve),j=g(fe),H=l(fe,"INPUT",{id:!0,type:!0,class:!0}),fe.forEach(v),U=g(X),F=l(X,"DIV",{class:!0});var Pe=p(F);J=l(Pe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(J)!=="svelte-1jj81z7"&&(J.textContent=ye),de=g(Pe),Z=l(Pe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(Z)!=="svelte-12ifwrd"&&(Z.textContent=oe),Pe.forEach(v),X.forEach(v),Ae.forEach(v),ee.forEach(v),this.h()},h(){a(c,"class","svelte-fg3va4"),a(y,"class","close-btn svelte-fg3va4"),a(o,"class","modal-header svelte-fg3va4"),a(b,"for","agentId"),a(b,"class","svelte-fg3va4"),a(A,"id","agentId"),a(A,"type","text"),A.required=!0,a(A,"placeholder","agent-uuid-or-identifier"),a(A,"class","svelte-fg3va4"),a(h,"class","form-group svelte-fg3va4"),a(k,"for","maxPayment"),a(k,"class","svelte-fg3va4"),a(w,"id","maxPayment"),a(w,"type","number"),w.required=!0,a(w,"min","1"),a(w,"class","svelte-fg3va4"),a(N,"class","form-group svelte-fg3va4"),a(P,"for","dailyLimit"),a(P,"class","svelte-fg3va4"),a(I,"id","dailyLimit"),a(I,"type","number"),I.required=!0,a(I,"min","1"),a(I,"class","svelte-fg3va4"),a(D,"class","form-group svelte-fg3va4"),a(E,"for","monthlyLimit"),a(E,"class","svelte-fg3va4"),a(V,"id","monthlyLimit"),a(V,"type","number"),V.required=!0,a(V,"min","1"),a(V,"class","svelte-fg3va4"),a(C,"class","form-group svelte-fg3va4"),a(Q,"for","expiresAt"),a(Q,"class","svelte-fg3va4"),a(H,"id","expiresAt"),a(H,"type","date"),a(H,"class","svelte-fg3va4"),a(Y,"class","form-group svelte-fg3va4"),a(J,"type","button"),a(J,"class","btn-secondary svelte-fg3va4"),a(Z,"type","submit"),a(Z,"class","btn-primary svelte-fg3va4"),a(F,"class","form-actions svelte-fg3va4"),a(u,"class","svelte-fg3va4"),a(s,"class","modal svelte-fg3va4"),a(e,"class","modal-overlay svelte-fg3va4")},m(B,ee){he(B,e,ee),t(e,s),t(s,o),t(o,c),t(o,d),t(o,y),t(s,m),t(s,u),t(u,h),t(h,b),t(h,q),t(h,A),ue(A,i[6].agentId),t(u,O),t(u,N),t(N,k),t(N,M),t(N,w),ue(w,i[6].maxPaymentSatoshis),t(u,R),t(u,D),t(D,P),t(D,z),t(D,I),ue(I,i[6].dailyLimitSatoshis),t(u,L),t(u,C),t(C,E),t(C,K),t(C,V),ue(V,i[6].monthlyLimitSatoshis),t(u,ie),t(u,Y),t(Y,Q),t(Y,j),t(Y,H),ue(H,i[6].expiresAt),t(u,U),t(u,F),t(F,J),t(F,de),t(F,Z),me||(pe=[re(y,"click",i[12]),re(A,"input",i[13]),re(w,"input",i[14]),re(I,"input",i[15]),re(V,"input",i[16]),re(H,"input",i[17]),re(J,"click",i[18]),re(u,"submit",dt(i[8])),re(s,"click",ft(i[9])),re(e,"click",i[19])],me=!0)},p(B,ee){ee&64&&A.value!==B[6].agentId&&ue(A,B[6].agentId),ee&64&&Ie(w.value)!==B[6].maxPaymentSatoshis&&ue(w,B[6].maxPaymentSatoshis),ee&64&&Ie(I.value)!==B[6].dailyLimitSatoshis&&ue(I,B[6].dailyLimitSatoshis),ee&64&&Ie(V.value)!==B[6].monthlyLimitSatoshis&&ue(V,B[6].monthlyLimitSatoshis),ee&64&&ue(H,B[6].expiresAt)},d(B){B&&v(e),me=!1,ot(pe)}}}function kt(i){let e,s,o="ðŸ’° Payments & Revenue Dashboard",c,r,d="BSV payment processing and revenue management",y,S,m,u,h,b="Last Day",f,q="Last Week",A,O="Last Month",N,k,$="Authorize Agent",M,w,R,D,P;function T(C,E){return C[2]?Nt:C[3]?Lt:qt}let z=T(i),I=z(i),L=i[5]&&lt(i);return{c(){e=n("div"),s=n("h1"),s.textContent=o,c=_(),r=n("p"),r.textContent=d,y=_(),S=n("header"),m=n("div"),u=n("select"),h=n("option"),h.textContent=b,f=n("option"),f.textContent=q,A=n("option"),A.textContent=O,N=_(),k=n("button"),k.textContent=$,M=_(),I.c(),w=_(),L&&L.c(),R=We(),this.h()},l(C){e=l(C,"DIV",{class:!0});var E=p(e);s=l(E,"H1",{"data-svelte-h":!0}),x(s)!=="svelte-1rw7qw"&&(s.textContent=o),c=g(E),r=l(E,"P",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-dqa8b5"&&(r.textContent=d),y=g(E),S=l(E,"HEADER",{class:!0});var te=p(S);m=l(te,"DIV",{class:!0});var K=p(m);u=l(K,"SELECT",{class:!0});var V=p(u);h=l(V,"OPTION",{"data-svelte-h":!0}),x(h)!=="svelte-rog5w4"&&(h.textContent=b),f=l(V,"OPTION",{"data-svelte-h":!0}),x(f)!=="svelte-5ablhs"&&(f.textContent=q),A=l(V,"OPTION",{"data-svelte-h":!0}),x(A)!=="svelte-xdclgs"&&(A.textContent=O),V.forEach(v),N=g(K),k=l(K,"BUTTON",{class:!0,"data-svelte-h":!0}),x(k)!=="svelte-7kgx0x"&&(k.textContent=$),K.forEach(v),te.forEach(v),M=g(E),I.l(E),E.forEach(v),w=g(C),L&&L.l(C),R=We(),this.h()},h(){a(r,"class","subtitle"),h.__value="day",ue(h,h.__value),f.__value="week",ue(f,f.__value),A.__value="month",ue(A,A.__value),a(u,"class","svelte-fg3va4"),i[4]===void 0&&ut(()=>i[10].call(u)),a(k,"class","btn-primary svelte-fg3va4"),a(m,"class","header-controls svelte-fg3va4"),a(S,"class","dashboard-header svelte-fg3va4"),a(e,"class","explorer")},m(C,E){he(C,e,E),t(e,s),t(e,c),t(e,r),t(e,y),t(e,S),t(S,m),t(m,u),t(u,h),t(u,f),t(u,A),Qe(u,i[4],!0),t(m,N),t(m,k),t(e,M),I.m(e,null),he(C,w,E),L&&L.m(C,E),he(C,R,E),D||(P=[re(u,"change",i[10]),re(u,"change",i[7]),re(k,"click",i[11])],D=!0)},p(C,[E]){E&16&&Qe(u,C[4]),z===(z=T(C))&&I?I.p(C,E):(I.d(1),I=z(C),I&&(I.c(),I.m(e,null))),C[5]?L?L.p(C,E):(L=lt(C),L.c(),L.m(R.parentNode,R)):L&&(L.d(1),L=null)},i:ze,o:ze,d(C){C&&(v(e),v(w),v(R)),I.d(),L&&L.d(C),D=!1,ot(P)}}}function le(i){return i?i>=1e8?`${(i/1e8).toFixed(2)} BSV`:i>=1e3?`${(i/1e3).toFixed(1)}k sats`:`${i} sats`:"0 sats"}function wt(i,e,s){let o=null,c=null,r=!0,d=null,y="month",S=!1,m={agentId:"",maxPaymentSatoshis:1e4,dailyLimitSatoshis:5e4,monthlyLimitSatoshis:1e6,expiresAt:""};vt(async()=>{await u()});async function u(){try{s(2,r=!0),s(3,d=null),Tt(Oe),console.log("âœ… API client validation passed, loading D06 data...");const D=Oe.getRevenueSummary(y),P=Oe.getAgentSummary(),[T,z]=await Promise.all([D,P]);s(0,o=T),s(1,c=z),console.log("Dashboard data loaded:",{revenue:T,agents:z})}catch(D){if(s(3,d=D.message),console.error("Failed to load dashboard data:",D),D.message&&D.message.includes("is not a function")){console.log("ðŸ”„ Function error detected, forcing cache bust...");return}}finally{s(2,r=!1)}}async function h(){try{Ye.isConnected()||await Ye.connect();const D=await Et(JSON.stringify(m)),P=await Oe.authorizeAgent(m,D);P.success?(alert("Agent authorized successfully!"),s(5,S=!1),s(6,m={agentId:"",maxPaymentSatoshis:1e4,dailyLimitSatoshis:5e4,monthlyLimitSatoshis:1e6,expiresAt:""}),await u()):alert(`Authorization failed: ${P.reason}`)}catch(D){alert(`Authorization failed: ${D.message}`)}}function b(D){ht.call(this,i,D)}function f(){y=mt(this),s(4,y)}const q=()=>s(5,S=!0),A=()=>s(5,S=!1);function O(){m.agentId=this.value,s(6,m)}function N(){m.maxPaymentSatoshis=Ie(this.value),s(6,m)}function k(){m.dailyLimitSatoshis=Ie(this.value),s(6,m)}function $(){m.monthlyLimitSatoshis=Ie(this.value),s(6,m)}function M(){m.expiresAt=this.value,s(6,m)}return[o,c,r,d,y,S,m,u,h,b,f,q,A,O,N,k,$,M,()=>s(5,S=!1),()=>s(5,S=!1)]}class xt extends nt{constructor(e){super(),rt(this,e,wt,kt,it,{})}}function Rt(i){let e,s,o,c;return o=new xt({}),{c(){e=n("meta"),s=_(),At(o.$$.fragment),this.h()},l(r){const d=Ct("svelte-mcu4e1",document.head);e=l(d,"META",{name:!0,content:!0}),d.forEach(v),s=g(r),St(o.$$.fragment,r),this.h()},h(){document.title="Payments & Revenue - Admin Dashboard",a(e,"name","description"),a(e,"content","Manage D06 BSV payments, agent authorizations, and revenue analytics")},m(r,d){t(document.head,e),he(r,s,d),bt(o,r,d),c=!0},p:ze,i(r){c||(yt(o.$$.fragment,r),c=!0)},o(r){_t(o.$$.fragment,r),c=!1},d(r){r&&v(s),v(e),gt(o,r)}}}class Bt extends nt{constructor(e){super(),rt(this,e,null,Rt,it,{})}}export{Bt as component};
