import{_ as Mt}from"../chunks/C1FmrZbK.js";import{n as he,$ as st,a0 as xt,S as Et,i as Pt,s as Dt,d,b as N,p as a,e as b,f as P,j as y,l as It,v as At,N as Ht,V as Bt,q as Q,w as Oe,a as se,F as xe,c,o as Te,h as j,g as F,G as be,u as Be,k as L,t as z,H as ye,r as qt,J as Re,K as Fe,M as St,y as Nt,L as Vt,Q as Ot,T as Rt,U as Ft,R as zt}from"../chunks/BOFvEgh9.js";import{e as Ee}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{p as Kt}from"../chunks/DoBB0Fpi.js";import{a as Qe}from"../chunks/DSTINEup.js";import{w as Ut}from"../chunks/O6ZtjPQ5.js";import"../chunks/Cdn01nKd.js";const Tt=typeof window<"u";let Gt=Tt?()=>window.performance.now():()=>Date.now(),jt=Tt?l=>requestAnimationFrame(l):he;const Ne=new Set;function Lt(l){Ne.forEach(e=>{e.c(l)||(Ne.delete(e),e.f())}),Ne.size!==0&&jt(Lt)}function Yt(l){let e;return Ne.size===0&&jt(Lt),{promise:new Promise(t=>{Ne.add(e={c:l,f:t})}),abort(){Ne.delete(e)}}}function nt(l){return Object.prototype.toString.call(l)==="[object Date]"}function Xt(l){const e=l-1;return e*e*e+1}function We(l,e){if(l===e||l!==l)return()=>l;const t=typeof l;if(t!==typeof e||Array.isArray(l)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(l)){const s=e.map((i,n)=>We(l[n],i));return i=>s.map(n=>n(i))}if(t==="object"){if(!l||!e)throw new Error("Object cannot be null");if(nt(l)&&nt(e)){l=l.getTime(),e=e.getTime();const n=e-l;return r=>new Date(l+r*n)}const s=Object.keys(e),i={};return s.forEach(n=>{i[n]=We(l[n],e[n])}),n=>{const r={};return s.forEach(u=>{r[u]=i[u](n)}),r}}if(t==="number"){const s=e-l;return i=>l+i*s}throw new Error(`Cannot interpolate ${t} values`)}function Qt(l,e={}){const t=Ut(l);let s,i=l;function n(r,u){if(l==null)return t.set(l=r),Promise.resolve();i=r;let o=s,m=!1,{delay:f=0,duration:h=400,easing:_=xt,interpolate:E=We}=st(st({},e),u);if(h===0)return o&&(o.abort(),o=null),t.set(l=i),Promise.resolve();const k=Gt()+f;let T;return s=Yt(w=>{if(w<k)return!0;m||(T=E(l,r),typeof h=="function"&&(h=h(l,r)),m=!0),o&&(o.abort(),o=null);const g=w-k;return g>h?(t.set(l=r),!1):(t.set(l=T(_(g/h))),!0)}),s.promise}return{set:n,update:(r,u)=>n(r(i,l),u),subscribe:t.subscribe}}function rt(l,e,t){const s=l.slice();return s[31]=e[t],s}function it(l,e,t){const s=l.slice();s[34]=e[t];const i=s[2].find(function(...u){return l[16](s[34],...u)});s[35]=i;const n=s[2].find(function(...u){return l[17](s[34],...u)});return s[36]=n,s}function Wt(l){let e,t,s='<svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M8 2.5a5.5 5.5 0 0 0-4.25 2.028l-.896-.896a.5.5 0 0 0-.854.353V7.5a.5.5 0 0 0 .5.5h3.515a.5.5 0 0 0 .353-.854l-.896-.896A4.5 4.5 0 1 1 8 3.5a.5.5 0 0 0 0-1z"></path></svg>',i,n,r=Math.round(l[0].scale*100)+"",u,o,m,f,h,_,E,k,T="Current Asset",w,g,p,v,A,R="Parent",J,V,H,B,le,Z="Child",te,ne,ve,re,oe,C="Related",O,D,q,M,Y,K,ke,pe,me,we,Pe=Ee(l[3]),$=[];for(let I=0;I<Pe.length;I+=1)$[I]=ot(it(l,Pe,I));let de=Ee(l[2]),X=[];for(let I=0;I<de.length;I+=1)X[I]=ut(rt(l,de,I));let ee=l[4]&&ft(l);return{c(){e=y("div"),t=y("button"),t.innerHTML=s,i=L(),n=y("div"),u=z(r),o=z("%"),m=L(),f=y("div"),h=y("div"),_=y("div"),E=L(),k=y("span"),k.textContent=T,w=L(),g=y("div"),p=y("div"),v=L(),A=y("span"),A.textContent=R,J=L(),V=y("div"),H=y("div"),B=L(),le=y("span"),le.textContent=Z,te=L(),ne=y("div"),ve=y("div"),re=L(),oe=y("span"),oe.textContent=C,O=L(),D=ye("svg"),q=ye("defs"),M=ye("marker"),Y=ye("polygon");for(let I=0;I<$.length;I+=1)$[I].c();K=Be();for(let I=0;I<X.length;I+=1)X[I].c();ke=L(),ee&&ee.c(),pe=Be(),this.h()},l(I){e=b(I,"DIV",{class:!0});var U=P(e);t=b(U,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Q(t)!=="svelte-rlzwuw"&&(t.innerHTML=s),i=j(U),n=b(U,"DIV",{class:!0});var S=P(n);u=F(S,r),o=F(S,"%"),S.forEach(d),U.forEach(d),m=j(I),f=b(I,"DIV",{class:!0});var W=P(f);h=b(W,"DIV",{class:!0});var Se=P(h);_=b(Se,"DIV",{class:!0,style:!0}),P(_).forEach(d),E=j(Se),k=b(Se,"SPAN",{"data-svelte-h":!0}),Q(k)!=="svelte-1hetych"&&(k.textContent=T),Se.forEach(d),w=j(W),g=b(W,"DIV",{class:!0});var De=P(g);p=b(De,"DIV",{class:!0,style:!0}),P(p).forEach(d),v=j(De),A=b(De,"SPAN",{"data-svelte-h":!0}),Q(A)!=="svelte-jtgwhe"&&(A.textContent=R),De.forEach(d),J=j(W),V=b(W,"DIV",{class:!0});var ge=P(V);H=b(ge,"DIV",{class:!0,style:!0}),P(H).forEach(d),B=j(ge),le=b(ge,"SPAN",{"data-svelte-h":!0}),Q(le)!=="svelte-yoeogw"&&(le.textContent=Z),ge.forEach(d),te=j(W),ne=b(W,"DIV",{class:!0});var ie=P(ne);ve=b(ie,"DIV",{class:!0,style:!0}),P(ve).forEach(d),re=j(ie),oe=b(ie,"SPAN",{"data-svelte-h":!0}),Q(oe)!=="svelte-1cu2yrv"&&(oe.textContent=C),ie.forEach(d),W.forEach(d),O=j(I),D=be(I,"svg",{class:!0,style:!0});var ae=P(D);q=be(ae,"defs",{});var _e=P(q);M=be(_e,"marker",{id:!0,markerWidth:!0,markerHeight:!0,refX:!0,refY:!0,orient:!0});var je=P(M);Y=be(je,"polygon",{points:!0,fill:!0}),P(Y).forEach(d),je.forEach(d),_e.forEach(d);for(let Ce=0;Ce<$.length;Ce+=1)$[Ce].l(ae);K=Be();for(let Ce=0;Ce<X.length;Ce+=1)X[Ce].l(ae);ae.forEach(d),ke=j(I),ee&&ee.l(I),pe=Be(),this.h()},h(){a(t,"class","control-btn svelte-1c9jxpn"),a(t,"title","Reset View"),a(n,"class","zoom-info svelte-1c9jxpn"),a(e,"class","graph-controls svelte-1c9jxpn"),a(_,"class","legend-color svelte-1c9jxpn"),xe(_,"background",l[7].current),a(h,"class","legend-item svelte-1c9jxpn"),a(p,"class","legend-color svelte-1c9jxpn"),xe(p,"background",l[7].parent),a(g,"class","legend-item svelte-1c9jxpn"),a(H,"class","legend-color svelte-1c9jxpn"),xe(H,"background",l[7].child),a(V,"class","legend-item svelte-1c9jxpn"),a(ve,"class","legend-color svelte-1c9jxpn"),xe(ve,"background",l[7].sibling),a(ne,"class","legend-item svelte-1c9jxpn"),a(f,"class","graph-legend svelte-1c9jxpn"),a(Y,"points","0 0, 10 3.5, 0 7"),a(Y,"fill","#8b949e"),a(M,"id","arrowhead"),a(M,"markerWidth","10"),a(M,"markerHeight","7"),a(M,"refX","9"),a(M,"refY","3.5"),a(M,"orient","auto"),a(D,"class","graph-svg svelte-1c9jxpn"),xe(D,"transform",l[5])},m(I,U){N(I,e,U),c(e,t),c(e,i),c(e,n),c(n,u),c(n,o),N(I,m,U),N(I,f,U),c(f,h),c(h,_),c(h,E),c(h,k),c(f,w),c(f,g),c(g,p),c(g,v),c(g,A),c(f,J),c(f,V),c(V,H),c(V,B),c(V,le),c(f,te),c(f,ne),c(ne,ve),c(ne,re),c(ne,oe),N(I,O,U),N(I,D,U),c(D,q),c(q,M),c(M,Y);for(let S=0;S<$.length;S+=1)$[S]&&$[S].m(D,null);c(D,K);for(let S=0;S<X.length;S+=1)X[S]&&X[S].m(D,null);N(I,ke,U),ee&&ee.m(I,U),N(I,pe,U),me||(we=Te(t,"click",l[13]),me=!0)},p(I,U){if(U[0]&1&&r!==(r=Math.round(I[0].scale*100)+"")&&se(u,r),U[0]&4108){Pe=Ee(I[3]);let S;for(S=0;S<Pe.length;S+=1){const W=it(I,Pe,S);$[S]?$[S].p(W,U):($[S]=ot(W),$[S].c(),$[S].m(D,K))}for(;S<$.length;S+=1)$[S].d(1);$.length=Pe.length}if(U[0]&3972){de=Ee(I[2]);let S;for(S=0;S<de.length;S+=1){const W=rt(I,de,S);X[S]?X[S].p(W,U):(X[S]=ut(W),X[S].c(),X[S].m(D,null))}for(;S<X.length;S+=1)X[S].d(1);X.length=de.length}U[0]&32&&xe(D,"transform",I[5]),I[4]?ee?ee.p(I,U):(ee=ft(I),ee.c(),ee.m(pe.parentNode,pe)):ee&&(ee.d(1),ee=null)},d(I){I&&(d(e),d(m),d(f),d(O),d(D),d(ke),d(pe)),Oe($,I),Oe(X,I),ee&&ee.d(I),me=!1,we()}}}function Jt(l){let e,t='<div class="empty-icon svelte-1c9jxpn">🔗</div> <h3 class="svelte-1c9jxpn">No Lineage Data</h3> <p class="svelte-1c9jxpn">No data lineage information is available for this asset.</p>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-k58pnc"&&(e.innerHTML=t),this.h()},h(){a(e,"class","empty-state svelte-1c9jxpn")},m(s,i){N(s,e,i)},p:he,d(s){s&&d(e)}}}function at(l){let e,t,s,i,n,r;return{c(){e=ye("line"),this.h()},l(u){e=be(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,opacity:!0,"marker-end":!0,class:!0}),P(e).forEach(d),this.h()},h(){a(e,"x1",t=l[35].x),a(e,"y1",s=l[35].y),a(e,"x2",i=l[36].x),a(e,"y2",n=l[36].y),a(e,"stroke","#8b949e"),a(e,"stroke-width",$t),a(e,"opacity",r=l[12](l[34])),a(e,"marker-end","url(#arrowhead)"),a(e,"class","edge svelte-1c9jxpn")},m(u,o){N(u,e,o)},p(u,o){o[0]&12&&t!==(t=u[35].x)&&a(e,"x1",t),o[0]&12&&s!==(s=u[35].y)&&a(e,"y1",s),o[0]&12&&i!==(i=u[36].x)&&a(e,"x2",i),o[0]&12&&n!==(n=u[36].y)&&a(e,"y2",n),o[0]&8&&r!==(r=u[12](u[34]))&&a(e,"opacity",r)},d(u){u&&d(e)}}}function ot(l){let e,t=l[35]&&l[36]&&at(l);return{c(){t&&t.c(),e=Be()},l(s){t&&t.l(s),e=Be()},m(s,i){t&&t.m(s,i),N(s,e,i)},p(s,i){s[35]&&s[36]?t?t.p(s,i):(t=at(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&d(e),t&&t.d(s)}}}function ct(l){let e,t;return{c(){e=ye("circle"),t=ye("circle"),this.h()},l(s){e=be(s,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),P(e).forEach(d),t=be(s,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),P(t).forEach(d),this.h()},h(){a(e,"cx","0"),a(e,"cy","0"),a(e,"r","6"),a(e,"fill","#fff"),a(t,"cx","0"),a(t,"cy","0"),a(t,"r","3"),a(t,"fill",l[7].current)},m(s,i){N(s,e,i),N(s,t,i)},p:he,d(s){s&&(d(e),d(t))}}}function ut(l){let e,t,s,i,n,r,u=(l[31].label.length>15?l[31].label.substring(0,15)+"...":l[31].label)+"",o,m,f,h;function _(){return l[18](l[31])}function E(){return l[19](l[31])}let k=l[31].type==="current"&&ct(l);return{c(){e=ye("g"),t=ye("circle"),s=ye("circle"),n=ye("circle"),r=ye("text"),o=z(u),k&&k.c(),this.h()},l(T){e=be(T,"g",{class:!0,transform:!0});var w=P(e);t=be(w,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),P(t).forEach(d),s=be(w,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),P(s).forEach(d),n=be(w,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),P(n).forEach(d),r=be(w,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"font-weight":!0,class:!0});var g=P(r);o=F(g,u),g.forEach(d),k&&k.l(w),w.forEach(d),this.h()},h(){a(t,"cx","2"),a(t,"cy","2"),a(t,"r",qe),a(t,"fill","rgba(0,0,0,0.3)"),a(t,"class","node-shadow"),a(s,"cx","0"),a(s,"cy","0"),a(s,"r",qe),a(s,"fill",i=l[11](l[31])),a(s,"stroke","#21262d"),a(s,"stroke-width","2"),a(s,"class","node-background svelte-1c9jxpn"),a(n,"cx","0"),a(n,"cy","0"),a(n,"r",qe-8),a(n,"fill","rgba(255,255,255,0.1)"),a(n,"class","node-icon"),a(r,"x","0"),a(r,"y",qe+20),a(r,"text-anchor","middle"),a(r,"fill","#e6edf3"),a(r,"font-size","12"),a(r,"font-weight","500"),a(r,"class","node-label svelte-1c9jxpn"),a(e,"class","node-group svelte-1c9jxpn"),a(e,"transform",m="translate("+l[31].x+", "+l[31].y+")")},m(T,w){N(T,e,w),c(e,t),c(e,s),c(e,n),c(e,r),c(r,o),k&&k.m(e,null),f||(h=[Te(s,"click",_),Te(s,"mouseenter",E),Te(s,"mouseleave",l[10])],f=!0)},p(T,w){l=T,w[0]&4&&i!==(i=l[11](l[31]))&&a(s,"fill",i),w[0]&4&&u!==(u=(l[31].label.length>15?l[31].label.substring(0,15)+"...":l[31].label)+"")&&se(o,u),l[31].type==="current"?k?k.p(l,w):(k=ct(l),k.c(),k.m(e,null)):k&&(k.d(1),k=null),w[0]&4&&m!==(m="translate("+l[31].x+", "+l[31].y+")")&&a(e,"transform",m)},d(T){T&&d(e),k&&k.d(),f=!1,qt(h)}}}function ft(l){let e,t,s=l[4].label+"",i,n,r,u,o="ID:",m,f=l[4].id+"",h,_,E,k,T="Type:",w,g=l[4].type+"",p,v,A,R="×",J,V;return{c(){e=y("div"),t=y("h4"),i=z(s),n=L(),r=y("p"),u=y("strong"),u.textContent=o,m=L(),h=z(f),_=L(),E=y("p"),k=y("strong"),k.textContent=T,w=L(),p=z(g),v=L(),A=y("button"),A.textContent=R,this.h()},l(H){e=b(H,"DIV",{class:!0});var B=P(e);t=b(B,"H4",{class:!0});var le=P(t);i=F(le,s),le.forEach(d),n=j(B),r=b(B,"P",{class:!0});var Z=P(r);u=b(Z,"STRONG",{"data-svelte-h":!0}),Q(u)!=="svelte-usfrkd"&&(u.textContent=o),m=j(Z),h=F(Z,f),Z.forEach(d),_=j(B),E=b(B,"P",{class:!0});var te=P(E);k=b(te,"STRONG",{"data-svelte-h":!0}),Q(k)!=="svelte-1y9dw9w"&&(k.textContent=T),w=j(te),p=F(te,g),te.forEach(d),v=j(B),A=b(B,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(A)!=="svelte-h2c6ek"&&(A.textContent=R),B.forEach(d),this.h()},h(){a(t,"class","svelte-1c9jxpn"),a(r,"class","svelte-1c9jxpn"),a(E,"class","svelte-1c9jxpn"),a(A,"class","close-details svelte-1c9jxpn"),a(e,"class","node-details svelte-1c9jxpn")},m(H,B){N(H,e,B),c(e,t),c(t,i),c(e,n),c(e,r),c(r,u),c(r,m),c(r,h),c(e,_),c(e,E),c(E,k),c(E,w),c(E,p),c(e,v),c(e,A),J||(V=Te(A,"click",l[20]),J=!0)},p(H,B){B[0]&16&&s!==(s=H[4].label+"")&&se(i,s),B[0]&16&&f!==(f=H[4].id+"")&&se(h,f),B[0]&16&&g!==(g=H[4].type+"")&&se(p,g)},d(H){H&&d(e),J=!1,V()}}}function Zt(l){let e;function t(n,r){return n[2].length===0?Jt:Wt}let s=t(l),i=s(l);return{c(){e=y("div"),i.c(),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=P(e);i.l(r),r.forEach(d),this.h()},h(){a(e,"class","lineage-graph-container svelte-1c9jxpn")},m(n,r){N(n,e,r),i.m(e,null),l[21](e)},p(n,r){s===(s=t(n))&&i?i.p(n,r):(i.d(1),i=s(n),i&&(i.c(),i.m(e,null)))},i:he,o:he,d(n){n&&d(e),i.d(),l[21](null)}}}const qe=40,$t=2;function Xe(l,e,t,s,i=!1){if(l.length===0)return;const n=2*Math.PI/Math.max(l.length,3);l.forEach((r,u)=>{if(i&&l.length>1)r.x=e,r.y=t+(u-(l.length-1)/2)*s;else{const o=u*n;r.x=e+Math.cos(o)*s,r.y=t+Math.sin(o)*s}})}function el(l,e,t){let s,i,{lineageData:n=[]}=e,{currentAssetId:r=null}=e,u,o=[],m=[],f=null,h=null,_={x:0,y:0,scale:1},E=Qt({x:0,y:0,scale:1},{duration:300,easing:Xt});It(l,E,C=>t(0,i=C));const k={current:"#2f81f7",parent:"#f78166",child:"#56d364",sibling:"#d2a8ff",default:"#8b949e"};At(()=>{T(),v()}),Ht(()=>{n.length>0&&T()});function T(){if(!n||n.length===0){t(2,o=[]),t(3,m=[]);return}const C=new Map,O=[];n.forEach(D=>{C.has(D.source_id)||C.set(D.source_id,{id:D.source_id,label:D.source_name||`Asset ${D.source_id}`,type:w(D.source_id),x:0,y:0}),C.has(D.target_id)||C.set(D.target_id,{id:D.target_id,label:D.target_name||`Asset ${D.target_id}`,type:w(D.target_id),x:0,y:0}),O.push({source:D.source_id,target:D.target_id,type:D.relationship_type||"derived_from"})}),t(2,o=Array.from(C.values())),t(3,m=O),g()}function w(C){if(C===r)return"current";const O=m.filter(M=>M.target===C),D=m.filter(M=>M.source===C),q=m.filter(M=>M.source===r&&M.target===C||M.target===r&&M.source===C);return q.some(M=>M.source===C)?"parent":q.some(M=>M.target===C)?"child":O.length>0||D.length>0?"sibling":"default"}function g(){if(o.length===0)return;const C=(u==null?void 0:u.offsetWidth)||800,O=(u==null?void 0:u.offsetHeight)||400,D=C/2,q=O/2;if(o.length===1){t(2,o[0].x=D,o),t(2,o[0].y=q,o);return}const M=o.find(K=>K.id===r);M&&(M.x=D,M.y=q);const Y={parents:o.filter(K=>K.type==="parent"),children:o.filter(K=>K.type==="child"),siblings:o.filter(K=>K.type==="sibling"),others:o.filter(K=>K.type==="default")};Xe(Y.parents,D,q-120,150),Xe(Y.children,D,q+120,150),Xe(Y.siblings,D-200,q,100,!0),Xe(Y.others,D+200,q,100,!0),p()}function p(){for(let C=0;C<50;C++)for(let O=0;O<o.length;O++)for(let D=O+1;D<o.length;D++){const q=o[D].x-o[O].x,M=o[D].y-o[O].y,Y=Math.sqrt(q*q+M*M);if(Y<qe*3){const K=(qe*3-Y)/Y*.1,ke=q*K,pe=M*K;t(2,o[O].x-=ke,o),t(2,o[O].y-=pe,o),t(2,o[D].x+=ke,o),t(2,o[D].y+=pe,o)}}}function v(){if(!u)return;let C=!1,O,D;u.addEventListener("mousedown",q=>{(q.target===u||q.target.classList.contains("graph-background"))&&(C=!0,O=q.clientX-_.x,D=q.clientY-_.y,t(1,u.style.cursor="grabbing",u))}),u.addEventListener("mousemove",q=>{C&&(_.x=q.clientX-O,_.y=q.clientY-D,A())}),u.addEventListener("mouseup",()=>{C=!1,t(1,u.style.cursor="grab",u)}),u.addEventListener("wheel",q=>{q.preventDefault();const M=q.deltaY>0?.9:1.1,Y=Math.max(.1,Math.min(3,_.scale*M)),K=u.getBoundingClientRect();K.width/2,K.height/2,_.scale=Y,A()})}function A(){E.set(_)}function R(C){t(4,f=(f==null?void 0:f.id)===C.id?null:C);const O=u.getBoundingClientRect();_.x=O.width/2-C.x*_.scale,_.y=O.height/2-C.y*_.scale,A()}function J(C){h=C}function V(){h=null}function H(C){return(f==null?void 0:f.id)===C.id?"#f78166":(h==null?void 0:h.id)===C.id?"#58a6ff":k[C.type]||k.default}function B(C){return!f&&!h?.6:(f==null?void 0:f.id)===C.source||(f==null?void 0:f.id)===C.target?1:(h==null?void 0:h.id)===C.source||(h==null?void 0:h.id)===C.target?.8:.2}function le(){_={x:0,y:0,scale:1},A(),t(4,f=null)}const Z=(C,O)=>O.id===C.source,te=(C,O)=>O.id===C.target,ne=C=>R(C),ve=C=>J(C),re=()=>t(4,f=null);function oe(C){Bt[C?"unshift":"push"](()=>{u=C,t(1,u)})}return l.$$set=C=>{"lineageData"in C&&t(14,n=C.lineageData),"currentAssetId"in C&&t(15,r=C.currentAssetId)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(5,s=`translate(${i.x}px, ${i.y}px) scale(${i.scale})`)},[i,u,o,m,f,s,E,k,R,J,V,H,B,le,n,r,Z,te,ne,ve,re,oe]}class tl extends Et{constructor(e){super(),Pt(this,e,el,Zt,Dt,{lineageData:14,currentAssetId:15},null,[-1,-1])}}function ht(l,e,t){const s=l.slice();return s[16]=e[t],s}function dt(l,e,t){const s=l.slice();return s[16]=e[t],s}function _t(l,e,t){const s=l.slice();return s[21]=e[t],s}function ll(l){let e,t='<h2 class="svelte-wnb35o">Asset Not Found</h2> <p>The requested asset could not be found.</p> <a href="/market" class="back-link svelte-wnb35o">← Back to Market</a>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1ncjsj4"&&(e.innerHTML=t),this.h()},h(){a(e,"class","error svelte-wnb35o")},m(s,i){N(s,e,i)},p:he,i:he,o:he,d(s){s&&d(e)}}}function sl(l){let e,t,s="← Back to Market",i,n,r,u=(l[0].title||"Untitled Asset")+"",o,m,f,h,_,E=l[0].pricePerKB?`💳 Buy - $${l[0].pricePerKB.toFixed(3)}/KB`:"💾 Get Free",k,T,w,g,p,v,A,R="Asset Overview",J,V,H,B,le="Producer:",Z,te=He(l[0].producer)+"",ne,ve,re,oe,C="Type:",O,D=He(l[0].type)+"",q,M,Y=He(l[0].format)+"",K,ke,pe,me,we,Pe="Quality:",$,de,X=l[0].quality_score?(l[0].quality_score*100).toFixed(1)+"%":"N/A",ee,I,U,S,W,Se="Data Lineage",De,ge,ie,ae,_e,je,Ce,ce=l[4]&&pt(l),ue=l[0].description&&vt(l),fe=l[4]&&mt(l);const Je=[ul,cl],Ie=[];function Ze(x,G){return x[1].length>0?0:1}return ie=Ze(l),ae=Ie[ie]=Je[ie](l),{c(){e=y("div"),t=y("a"),t.textContent=s,i=L(),n=y("div"),r=y("h1"),o=z(u),m=L(),f=y("div"),ce&&ce.c(),h=L(),_=y("button"),k=z(E),T=L(),ue&&ue.c(),w=L(),g=y("div"),fe&&fe.c(),p=L(),v=y("div"),A=y("h2"),A.textContent=R,J=L(),V=y("div"),H=y("span"),B=y("strong"),B.textContent=le,Z=L(),ne=z(te),ve=L(),re=y("span"),oe=y("strong"),oe.textContent=C,O=L(),q=z(D),M=z(" ("),K=z(Y),ke=z(")"),pe=L(),me=y("span"),we=y("strong"),we.textContent=Pe,$=L(),de=y("span"),ee=z(X),U=L(),S=y("div"),W=y("h2"),W.textContent=Se,De=L(),ge=y("div"),ae.c(),this.h()},l(x){e=b(x,"DIV",{class:!0});var G=P(e);t=b(G,"A",{href:!0,class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1ntozfy"&&(t.textContent=s),i=j(G),n=b(G,"DIV",{class:!0});var Ae=P(n);r=b(Ae,"H1",{class:!0});var $e=P(r);o=F($e,u),$e.forEach(d),m=j(Ae),f=b(Ae,"DIV",{class:!0});var ze=P(f);ce&&ce.l(ze),h=j(ze),_=b(ze,"BUTTON",{class:!0});var et=P(_);k=F(et,E),et.forEach(d),ze.forEach(d),Ae.forEach(d),T=j(G),ue&&ue.l(G),G.forEach(d),w=j(x),g=b(x,"DIV",{class:!0});var Le=P(g);fe&&fe.l(Le),p=j(Le),v=b(Le,"DIV",{class:!0});var Ke=P(v);A=b(Ke,"H2",{class:!0,"data-svelte-h":!0}),Q(A)!=="svelte-koall1"&&(A.textContent=R),J=j(Ke),V=b(Ke,"DIV",{class:!0});var Me=P(V);H=b(Me,"SPAN",{class:!0});var Ue=P(H);B=b(Ue,"STRONG",{class:!0,"data-svelte-h":!0}),Q(B)!=="svelte-lve41i"&&(B.textContent=le),Z=j(Ue),ne=F(Ue,te),Ue.forEach(d),ve=j(Me),re=b(Me,"SPAN",{class:!0});var Ve=P(re);oe=b(Ve,"STRONG",{class:!0,"data-svelte-h":!0}),Q(oe)!=="svelte-1y9dw9w"&&(oe.textContent=C),O=j(Ve),q=F(Ve,D),M=F(Ve," ("),K=F(Ve,Y),ke=F(Ve,")"),Ve.forEach(d),pe=j(Me),me=b(Me,"SPAN",{class:!0});var Ge=P(me);we=b(Ge,"STRONG",{class:!0,"data-svelte-h":!0}),Q(we)!=="svelte-e5k5ph"&&(we.textContent=Pe),$=j(Ge),de=b(Ge,"SPAN",{class:!0});var tt=P(de);ee=F(tt,X),tt.forEach(d),Ge.forEach(d),Me.forEach(d),Ke.forEach(d),U=j(Le),S=b(Le,"DIV",{class:!0});var Ye=P(S);W=b(Ye,"H2",{class:!0,"data-svelte-h":!0}),Q(W)!=="svelte-tpa2hr"&&(W.textContent=Se),De=j(Ye),ge=b(Ye,"DIV",{class:!0});var lt=P(ge);ae.l(lt),lt.forEach(d),Ye.forEach(d),Le.forEach(d),this.h()},h(){a(t,"href","/market"),a(t,"class","back-link svelte-wnb35o"),a(r,"class","svelte-wnb35o"),a(_,"class","buy-btn-detail svelte-wnb35o"),a(f,"class","title-badges svelte-wnb35o"),a(n,"class","title-section svelte-wnb35o"),a(e,"class","header svelte-wnb35o"),a(A,"class","svelte-wnb35o"),a(B,"class","svelte-wnb35o"),a(H,"class","svelte-wnb35o"),a(oe,"class","svelte-wnb35o"),a(re,"class","svelte-wnb35o"),a(we,"class","svelte-wnb35o"),a(de,"class",I="quality-score score-"+(l[0].quality_score>=.8?"high":l[0].quality_score>=.6?"medium":"low")+" svelte-wnb35o"),a(me,"class","svelte-wnb35o"),a(V,"class","asset-summary svelte-wnb35o"),a(v,"class","section svelte-wnb35o"),a(W,"class","svelte-wnb35o"),a(ge,"class","lineage-container svelte-wnb35o"),a(S,"class","section lineage-section svelte-wnb35o"),a(g,"class","content-grid svelte-wnb35o")},m(x,G){N(x,e,G),c(e,t),c(e,i),c(e,n),c(n,r),c(r,o),c(n,m),c(n,f),ce&&ce.m(f,null),c(f,h),c(f,_),c(_,k),c(e,T),ue&&ue.m(e,null),N(x,w,G),N(x,g,G),fe&&fe.m(g,null),c(g,p),c(g,v),c(v,A),c(v,J),c(v,V),c(V,H),c(H,B),c(H,Z),c(H,ne),c(V,ve),c(V,re),c(re,oe),c(re,O),c(re,q),c(re,M),c(re,K),c(re,ke),c(V,pe),c(V,me),c(me,we),c(me,$),c(me,de),c(de,ee),c(g,U),c(g,S),c(S,W),c(S,De),c(S,ge),Ie[ie].m(ge,null),_e=!0,je||(Ce=Te(_,"click",l[10]),je=!0)},p(x,G){(!_e||G&1)&&u!==(u=(x[0].title||"Untitled Asset")+"")&&se(o,u),x[4]?ce?ce.p(x,G):(ce=pt(x),ce.c(),ce.m(f,h)):ce&&(ce.d(1),ce=null),(!_e||G&1)&&E!==(E=x[0].pricePerKB?`💳 Buy - $${x[0].pricePerKB.toFixed(3)}/KB`:"💾 Get Free")&&se(k,E),x[0].description?ue?ue.p(x,G):(ue=vt(x),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null),x[4]?fe?fe.p(x,G):(fe=mt(x),fe.c(),fe.m(g,p)):fe&&(fe.d(1),fe=null),(!_e||G&1)&&te!==(te=He(x[0].producer)+"")&&se(ne,te),(!_e||G&1)&&D!==(D=He(x[0].type)+"")&&se(q,D),(!_e||G&1)&&Y!==(Y=He(x[0].format)+"")&&se(K,Y),(!_e||G&1)&&X!==(X=x[0].quality_score?(x[0].quality_score*100).toFixed(1)+"%":"N/A")&&se(ee,X),(!_e||G&1&&I!==(I="quality-score score-"+(x[0].quality_score>=.8?"high":x[0].quality_score>=.6?"medium":"low")+" svelte-wnb35o"))&&a(de,"class",I);let Ae=ie;ie=Ze(x),ie===Ae?Ie[ie].p(x,G):(Vt(),Re(Ie[Ae],1,1,()=>{Ie[Ae]=null}),St(),ae=Ie[ie],ae?ae.p(x,G):(ae=Ie[ie]=Je[ie](x),ae.c()),Fe(ae,1),ae.m(ge,null))},i(x){_e||(Fe(ae),_e=!0)},o(x){Re(ae),_e=!1},d(x){x&&(d(e),d(w),d(g)),ce&&ce.d(),ue&&ue.d(),fe&&fe.d(),Ie[ie].d(),je=!1,Ce()}}}function nl(l){let e,t,s="Error Loading Asset",i,n,r,u,o,m="← Back to Market";return{c(){e=y("div"),t=y("h2"),t.textContent=s,i=L(),n=y("p"),r=z(l[3]),u=L(),o=y("a"),o.textContent=m,this.h()},l(f){e=b(f,"DIV",{class:!0});var h=P(e);t=b(h,"H2",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1k65jbw"&&(t.textContent=s),i=j(h),n=b(h,"P",{});var _=P(n);r=F(_,l[3]),_.forEach(d),u=j(h),o=b(h,"A",{href:!0,class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-1ntozfy"&&(o.textContent=m),h.forEach(d),this.h()},h(){a(t,"class","svelte-wnb35o"),a(o,"href","/market"),a(o,"class","back-link svelte-wnb35o"),a(e,"class","error svelte-wnb35o")},m(f,h){N(f,e,h),c(e,t),c(e,i),c(e,n),c(n,r),c(e,u),c(e,o)},p(f,h){h&8&&se(r,f[3])},i:he,o:he,d(f){f&&d(e)}}}function rl(l){let e,t='<div class="spinner svelte-wnb35o"></div> <p>Loading asset details...</p>';return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-ea6shh"&&(e.innerHTML=t),this.h()},h(){a(e,"class","loading svelte-wnb35o")},m(s,i){N(s,e,i)},p:he,i:he,o:he,d(s){s&&d(e)}}}function pt(l){let e,t=l[4].compliantPolicies+"",s,i,n=l[4].totalPolicies+"",r,u;return{c(){e=y("div"),s=z(t),i=z("/"),r=z(n),u=z(" Policies Compliant"),this.h()},l(o){e=b(o,"DIV",{class:!0});var m=P(e);s=F(m,t),i=F(m,"/"),r=F(m,n),u=F(m," Policies Compliant"),m.forEach(d),this.h()},h(){a(e,"class","compliance-badge svelte-wnb35o")},m(o,m){N(o,e,m),c(e,s),c(e,i),c(e,r),c(e,u)},p(o,m){m&16&&t!==(t=o[4].compliantPolicies+"")&&se(s,t),m&16&&n!==(n=o[4].totalPolicies+"")&&se(r,n)},d(o){o&&d(e)}}}function vt(l){let e,t=l[0].description+"",s;return{c(){e=y("p"),s=z(t),this.h()},l(i){e=b(i,"P",{class:!0});var n=P(e);s=F(n,t),n.forEach(d),this.h()},h(){a(e,"class","description svelte-wnb35o")},m(i,n){N(i,e,n),c(e,s)},p(i,n){n&1&&t!==(t=i[0].description+"")&&se(s,t)},d(i){i&&d(e)}}}function mt(l){let e,t,s="Policy Compliance",i,n,r,u=Ee(l[4].policies),o=[];for(let f=0;f<u.length;f+=1)o[f]=gt(_t(l,u,f));let m=l[5]&&bt(l);return{c(){e=y("div"),t=y("h2"),t.textContent=s,i=L(),n=y("div");for(let f=0;f<o.length;f+=1)o[f].c();r=L(),m&&m.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var h=P(e);t=b(h,"H2",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1iogpf9"&&(t.textContent=s),i=j(h),n=b(h,"DIV",{class:!0});var _=P(n);for(let E=0;E<o.length;E+=1)o[E].l(_);_.forEach(d),r=j(h),m&&m.l(h),h.forEach(d),this.h()},h(){a(t,"class","svelte-wnb35o"),a(n,"class","policy-selector svelte-wnb35o"),a(e,"class","section policy-section svelte-wnb35o")},m(f,h){N(f,e,h),c(e,t),c(e,i),c(e,n);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(n,null);c(e,r),m&&m.m(e,null)},p(f,h){if(h&176){u=Ee(f[4].policies);let _;for(_=0;_<u.length;_+=1){const E=_t(f,u,_);o[_]?o[_].p(E,h):(o[_]=gt(E),o[_].c(),o[_].m(n,null))}for(;_<o.length;_+=1)o[_].d(1);o.length=u.length}f[5]?m?m.p(f,h):(m=bt(f),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(f){f&&d(e),Oe(o,f),m&&m.d()}}}function il(l){let e;return{c(){e=z("✗")},l(t){e=F(t,"✗")},m(t,s){N(t,e,s)},d(t){t&&d(e)}}}function al(l){let e;return{c(){e=z("⚠")},l(t){e=F(t,"⚠")},m(t,s){N(t,e,s)},d(t){t&&d(e)}}}function ol(l){let e;return{c(){e=z("✓")},l(t){e=F(t,"✓")},m(t,s){N(t,e,s)},d(t){t&&d(e)}}}function gt(l){let e,t,s=l[21].name+"",i,n,r,u,o,m,f;function h(T,w){return T[21].status==="compliant"?ol:T[21].status==="partial"?al:il}let _=h(l),E=_(l);function k(){return l[11](l[21])}return{c(){e=y("button"),t=y("span"),i=z(s),n=L(),r=y("span"),E.c(),u=L(),this.h()},l(T){e=b(T,"BUTTON",{class:!0});var w=P(e);t=b(w,"SPAN",{class:!0});var g=P(t);i=F(g,s),g.forEach(d),n=j(w),r=b(w,"SPAN",{class:!0});var p=P(r);E.l(p),p.forEach(d),u=j(w),w.forEach(d),this.h()},h(){a(t,"class","policy-name svelte-wnb35o"),a(r,"class","policy-status-indicator svelte-wnb35o"),a(e,"class",o="policy-tab "+(l[21]===l[5]?"active":"")+" policy-"+l[21].status+" svelte-wnb35o")},m(T,w){N(T,e,w),c(e,t),c(t,i),c(e,n),c(e,r),E.m(r,null),c(e,u),m||(f=Te(e,"click",k),m=!0)},p(T,w){l=T,w&16&&s!==(s=l[21].name+"")&&se(i,s),_!==(_=h(l))&&(E.d(1),E=_(l),E&&(E.c(),E.m(r,null))),w&48&&o!==(o="policy-tab "+(l[21]===l[5]?"active":"")+" policy-"+l[21].status+" svelte-wnb35o")&&a(e,"class",o)},d(T){T&&d(e),E.d(),m=!1,f()}}}function bt(l){let e,t,s,i="✓ Matches",n,r,u,o,m,f="✗ Mismatches",h,_,E=Ee(l[5].checks.filter(wt)),k=[];for(let g=0;g<E.length;g+=1)k[g]=yt(dt(l,E,g));let T=Ee(l[5].checks.filter(Ct)),w=[];for(let g=0;g<T.length;g+=1)w[g]=kt(ht(l,T,g));return{c(){e=y("div"),t=y("div"),s=y("h3"),s.textContent=i,n=L(),r=y("div");for(let g=0;g<k.length;g+=1)k[g].c();u=L(),o=y("div"),m=y("h3"),m.textContent=f,h=L(),_=y("div");for(let g=0;g<w.length;g+=1)w[g].c();this.h()},l(g){e=b(g,"DIV",{class:!0});var p=P(e);t=b(p,"DIV",{class:!0});var v=P(t);s=b(v,"H3",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1kxc6q"&&(s.textContent=i),n=j(v),r=b(v,"DIV",{class:!0});var A=P(r);for(let V=0;V<k.length;V+=1)k[V].l(A);A.forEach(d),v.forEach(d),u=j(p),o=b(p,"DIV",{class:!0});var R=P(o);m=b(R,"H3",{class:!0,"data-svelte-h":!0}),Q(m)!=="svelte-i4bes3"&&(m.textContent=f),h=j(R),_=b(R,"DIV",{class:!0});var J=P(_);for(let V=0;V<w.length;V+=1)w[V].l(J);J.forEach(d),R.forEach(d),p.forEach(d),this.h()},h(){a(s,"class","svelte-wnb35o"),a(r,"class","policy-list svelte-wnb35o"),a(t,"class","policy-column matches svelte-wnb35o"),a(m,"class","svelte-wnb35o"),a(_,"class","policy-list svelte-wnb35o"),a(o,"class","policy-column mismatches svelte-wnb35o"),a(e,"class","policy-columns svelte-wnb35o")},m(g,p){N(g,e,p),c(e,t),c(t,s),c(t,n),c(t,r);for(let v=0;v<k.length;v+=1)k[v]&&k[v].m(r,null);c(e,u),c(e,o),c(o,m),c(o,h),c(o,_);for(let v=0;v<w.length;v+=1)w[v]&&w[v].m(_,null)},p(g,p){if(p&32){E=Ee(g[5].checks.filter(wt));let v;for(v=0;v<E.length;v+=1){const A=dt(g,E,v);k[v]?k[v].p(A,p):(k[v]=yt(A),k[v].c(),k[v].m(r,null))}for(;v<k.length;v+=1)k[v].d(1);k.length=E.length}if(p&32){T=Ee(g[5].checks.filter(Ct));let v;for(v=0;v<T.length;v+=1){const A=ht(g,T,v);w[v]?w[v].p(A,p):(w[v]=kt(A),w[v].c(),w[v].m(_,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=T.length}},d(g){g&&d(e),Oe(k,g),Oe(w,g)}}}function yt(l){let e,t=l[16].rule+"",s,i;return{c(){e=y("div"),s=z(t),i=L(),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=P(e);s=F(r,t),i=j(r),r.forEach(d),this.h()},h(){a(e,"class","check-item match svelte-wnb35o")},m(n,r){N(n,e,r),c(e,s),c(e,i)},p(n,r){r&32&&t!==(t=n[16].rule+"")&&se(s,t)},d(n){n&&d(e)}}}function kt(l){let e,t=l[16].rule+"",s,i;return{c(){e=y("div"),s=z(t),i=L(),this.h()},l(n){e=b(n,"DIV",{class:!0});var r=P(e);s=F(r,t),i=j(r),r.forEach(d),this.h()},h(){a(e,"class","check-item mismatch svelte-wnb35o")},m(n,r){N(n,e,r),c(e,s),c(e,i)},p(n,r){r&32&&t!==(t=n[16].rule+"")&&se(s,t)},d(n){n&&d(e)}}}function cl(l){let e,t="<p>No lineage data available for this asset.</p>";return{c(){e=y("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-5uv27o"&&(e.innerHTML=t),this.h()},h(){a(e,"class","no-lineage svelte-wnb35o")},m(s,i){N(s,e,i)},p:he,i:he,o:he,d(s){s&&d(e)}}}function ul(l){let e,t;return e=new tl({props:{lineageData:l[1],currentAssetId:l[6]}}),{c(){zt(e.$$.fragment)},l(s){Ft(e.$$.fragment,s)},m(s,i){Rt(e,s,i),t=!0},p(s,i){const n={};i&2&&(n.lineageData=s[1]),i&64&&(n.currentAssetId=s[6]),e.$set(n)},i(s){t||(Fe(e.$$.fragment,s),t=!0)},o(s){Re(e.$$.fragment,s),t=!1},d(s){Ot(e,s)}}}function fl(l){var f;let e,t,s,i,n,r;document.title=e=(((f=l[0])==null?void 0:f.title)||"Asset Details")+" - Market";const u=[rl,nl,sl,ll],o=[];function m(h,_){return h[2]?0:h[3]?1:h[0]?2:3}return i=m(l),n=o[i]=u[i](l),{c(){t=L(),s=y("div"),n.c(),this.h()},l(h){Nt("svelte-1rp9l36",document.head).forEach(d),t=j(h),s=b(h,"DIV",{class:!0});var E=P(s);n.l(E),E.forEach(d),this.h()},h(){a(s,"class","asset-details svelte-wnb35o")},m(h,_){N(h,t,_),N(h,s,_),o[i].m(s,null),r=!0},p(h,[_]){var k;(!r||_&1)&&e!==(e=(((k=h[0])==null?void 0:k.title)||"Asset Details")+" - Market")&&(document.title=e);let E=i;i=m(h),i===E?o[i].p(h,_):(Vt(),Re(o[E],1,1,()=>{o[E]=null}),St(),n=o[i],n?n.p(h,_):(n=o[i]=u[i](h),n.c()),Fe(n,1),n.m(s,null))},i(h){r||(Fe(n),r=!0)},o(h){Re(n),r=!1},d(h){h&&(d(t),d(s)),o[i].d()}}}function He(l){return l==null?"N/A":typeof l=="object"?JSON.stringify(l,null,2):l.toString()}const wt=l=>l.matches,Ct=l=>!l.matches;function hl(l,e,t){let s,i;It(l,Kt,p=>t(9,i=p));let n=null,r=[],u=!0,o=null,m=null,f=null;At(async()=>{s&&await h()});async function h(){try{t(2,u=!0),console.log("Loading asset details for ID:",s);const p=await Qe.request("/search?limit=100",{method:"GET"});console.log("Search response:",p);const v=p.items||p||[];if(t(0,n=v.find(A=>A.versionId===s||A.datasetId===s||A.id===s)),!n)throw new Error(`Asset with ID ${s} not found`);console.log("Asset found:",n),await _(),await E()}catch(p){console.error("Error loading asset details:",p),t(3,o=p.message||"Failed to load asset details")}finally{t(2,u=!1)}}async function _(){try{console.log("Loading lineage data for asset:",n.versionId);const p=await Qe.request(`/lineage?versionId=${n.versionId}`,{method:"GET"});if(console.log("Lineage response:",p),p&&p.current){const v=[p.current],A=[];p.upstream&&(v.push(...p.upstream),p.upstream.forEach(R=>{A.push({source_id:R.versionId,target_id:p.current.versionId,source_name:R.title,target_name:p.current.title,relationship_type:R.relationshipType||"derived_from"})})),p.downstream&&(v.push(...p.downstream),p.downstream.forEach(R=>{A.push({source_id:p.current.versionId,target_id:R.versionId,source_name:p.current.title,target_name:R.title,relationship_type:R.relationshipType||"derived_from"})})),t(1,r=A),console.log("Lineage data processed:",r.length,"edges")}else t(1,r=[])}catch(p){console.error("Error loading lineage data:",p),t(1,r=[])}}async function E(){var R,J;if(!n)return;const v=[{name:"Data Classification Policy",description:"Ensures proper data classification",checks:[{rule:"Classification Required",matches:!!n.classification},{rule:"Public Classification Safe",matches:((R=n.classification)==null?void 0:R.toLowerCase())==="public"}]},{name:"Security Compliance Policy",description:"Validates security requirements",checks:[{rule:"No PII Detected",matches:!((J=n.pii_flags)!=null&&J.length)},{rule:"Access Level Defined",matches:!!n.access_level},{rule:"License Specified",matches:!!n.license}]},{name:"Data Quality Standards",description:"Ensures minimum quality thresholds",checks:[{rule:"Quality Score ≥ 60%",matches:n.quality_score>=.6},{rule:"Content Hash Present",matches:!!(n.contentHash||n.content_hash)},{rule:"Format Specified",matches:!!n.format}]},{name:"Provenance Policy",description:"Validates data origin and tracking",checks:[{rule:"Producer Identified",matches:!!n.producer},{rule:"Confirmations ≥ 1",matches:n.confirmations>=1},{rule:"Creation Date Present",matches:!!n.createdAt}]}].map(V=>{const H=V.checks.filter(Z=>Z.matches),B=V.checks.length,le=H.length===B?"compliant":H.length>0?"partial":"non-compliant";return{...V,status:le,passingChecks:H.length,totalChecks:B}}),A=[];v.forEach(V=>{V.checks.forEach(H=>{A.push({name:`${V.name}: ${H.rule}`,matches:H.matches,policyName:V.name,policyStatus:V.status})})}),t(4,m={policies:v,checks:A,matching:A.filter(V=>V.matches).length,total:A.length,compliantPolicies:v.filter(V=>V.status==="compliant").length,totalPolicies:v.length}),v.length>0&&t(5,f=v[0])}function k(p){t(5,f=p)}async function T(p){if(console.log("Purchase initiated for asset:",p),!p.pricePerKB||p.pricePerKB===0){alert(`Free access granted for ${p.title||p.datasetId}`);return}try{const{walletService:v,generateAuthHeaders:A}=await Mt(async()=>{const{walletService:te,generateAuthHeaders:ne}=await import("../chunks/BR2BQ31v.js");return{walletService:te,generateAuthHeaders:ne}},[],import.meta.url);if(!v.isConnected())if(confirm("You need to connect your wallet to make a purchase. Connect now?"))await v.connect();else return;const R=p.pricePerKB*(p.dataSizeBytes/1024),V=Math.floor(R*1e5);if(!confirm(`Confirm D06 BSV Payment:

Asset: ${p.title||p.datasetId}
Price: $${p.pricePerKB.toFixed(3)}/KB
Size: ${(p.dataSizeBytes/1024/1024).toFixed(2)} MB
Total: $${R.toFixed(4)} (${V} satoshis)

Process payment via D06 Payment API?`))return;const B={versionId:p.versionId||p.datasetId||p.id,quantity:1,paymentMethod:"bsv"},le=await A(JSON.stringify(B));console.log("Processing D06 payment:",B);const Z=await Qe.processPayment(B,le);Z.success?(alert(`Payment successful!

Receipt ID: ${Z.receiptId}
Total: ${Z.totalSatoshis} satoshis

Your purchase has been processed via the D06 payment system.`),console.log("Payment result:",Z)):alert(`Payment failed: ${Z.reason||"Unknown error"}`)}catch(v){console.error("Payment error:",v),v.message.includes("unauthorized")?alert("Payment failed: Authentication required. Please ensure your wallet is connected and properly authenticated."):v.message.includes("signature-invalid")?alert("Payment failed: Invalid signature. Please try reconnecting your wallet."):alert(`Payment failed: ${v.message}`)}}const w=()=>T(n),g=p=>k(p);return l.$$.update=()=>{l.$$.dirty&512&&t(6,s=i.params.id)},[n,r,u,o,m,f,s,k,T,i,w,g]}class kl extends Et{constructor(e){super(),Pt(this,e,hl,fl,Dt,{})}}export{kl as component};
