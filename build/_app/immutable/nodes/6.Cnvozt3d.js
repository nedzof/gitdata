import{S as ft,i as ht,s as vt,n as Ee,d as c,b as B,u as Ne,l as _t,v as pt,p as k,e as r,q as S,j as d,w as mt,r as ut,a as q,m as lt,c as o,o as de,f as y,g as V,h as I,t as z,k as w,x as re}from"../chunks/BOFvEgh9.js";import{e as ot}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{p as Ct}from"../chunks/DoBB0Fpi.js";import{g as kt}from"../chunks/Bl12ujJP.js";function st(t,e,n){const s=t.slice();return s[23]=e[n],s[25]=n,s}function gt(t){let e,n,s="Dataset not found",l,a,i,f,_;return{c(){e=d("div"),n=d("h1"),n.textContent=s,l=w(),a=d("p"),i=z('The dataset with ID "'),f=z(t[0]),_=z('" could not be found.'),this.h()},l(p){e=r(p,"DIV",{class:!0});var u=y(e);n=r(u,"H1",{"data-svelte-h":!0}),S(n)!=="svelte-1j3k0o1"&&(n.textContent=s),l=I(u),a=r(u,"P",{});var A=y(a);i=V(A,'The dataset with ID "'),f=V(A,t[0]),_=V(A,'" could not be found.'),A.forEach(c),u.forEach(c),this.h()},h(){k(e,"class","detail")},m(p,u){B(p,e,u),o(e,n),o(e,l),o(e,a),o(a,i),o(a,f),o(a,_)},p(p,u){u&1&&q(f,p[0])},d(p){p&&c(e)}}}function bt(t){let e,n,s=t[1].versionId+"",l,a,i,f,_="Metadata",p,u,A,ne="Producer",F,L=t[1].producer+"",ee,H,X="Created",$,K=Ae(t[1].createdAt)+"",Q,Y,ae="Content Hash",M,U=t[1].contentHash+"",ie,v,N="License",C,x=t[1].license+"",G,m,R="Price",b,h=t[1].price+"",g,P,j="Size",O,T=t[1].size+"",ce,ue,te,le,fe,he,Ge="Expand All",Ue,ve,qe="Collapse All",Oe,Pe,oe,Ie,Fe="Policy Check",Ve,_e,ze,pe,Le,De,He,je,me,Ce,We="Download Manifest (JSON)",Be,ge,Me,Se,Je,Xe,we=ot(t[2]),W=[];for(let D=0;D<we.length;D+=1)W[D]=dt(st(t,we,D));let Z=t[4]&&ct(t);return{c(){e=d("div"),n=d("h1"),l=z(s),a=w(),i=d("div"),f=d("h2"),f.textContent=_,p=w(),u=d("dl"),A=d("dt"),A.textContent=ne,F=d("dd"),ee=z(L),H=d("dt"),H.textContent=X,$=d("dd"),Q=z(K),Y=d("dt"),Y.textContent=ae,M=d("dd"),ie=z(U),v=d("dt"),v.textContent=N,C=d("dd"),G=z(x),m=d("dt"),m.textContent=R,b=d("dd"),g=z(h),P=d("dt"),P.textContent=j,O=d("dd"),ce=z(T),ue=w(),te=d("div"),le=d("h2"),fe=z(`Data Lineage
        `),he=d("button"),he.textContent=Ge,Ue=w(),ve=d("button"),ve.textContent=qe,Oe=w();for(let D=0;D<W.length;D+=1)W[D].c();Pe=w(),oe=d("div"),Ie=d("h2"),Ie.textContent=Fe,Ve=w(),_e=d("textarea"),ze=w(),pe=d("button"),Le=z("Run /ready Check"),He=w(),Z&&Z.c(),je=w(),me=d("div"),Ce=d("button"),Ce.textContent=We,Be=w(),ge=d("button"),Me=z("Download Data (if paid)"),this.h()},l(D){e=r(D,"DIV",{class:!0});var E=y(e);n=r(E,"H1",{});var J=y(n);l=V(J,s),J.forEach(c),a=I(E),i=r(E,"DIV",{class:!0});var be=y(i);f=r(be,"H2",{"data-svelte-h":!0}),S(f)!=="svelte-120cf5n"&&(f.textContent=_),p=I(be),u=r(be,"DL",{});var se=y(u);A=r(se,"DT",{"data-svelte-h":!0}),S(A)!=="svelte-18rubsk"&&(A.textContent=ne),F=r(se,"DD",{});var Ke=y(F);ee=V(Ke,L),Ke.forEach(c),H=r(se,"DT",{"data-svelte-h":!0}),S(H)!=="svelte-1b10dq"&&(H.textContent=X),$=r(se,"DD",{});var Qe=y($);Q=V(Qe,K),Qe.forEach(c),Y=r(se,"DT",{"data-svelte-h":!0}),S(Y)!=="svelte-f3sixx"&&(Y.textContent=ae),M=r(se,"DD",{});var Ye=y(M);ie=V(Ye,U),Ye.forEach(c),v=r(se,"DT",{"data-svelte-h":!0}),S(v)!=="svelte-o4j4yv"&&(v.textContent=N),C=r(se,"DD",{});var Ze=y(C);G=V(Ze,x),Ze.forEach(c),m=r(se,"DT",{"data-svelte-h":!0}),S(m)!=="svelte-i1wuep"&&(m.textContent=R),b=r(se,"DD",{});var $e=y(b);g=V($e,h),$e.forEach(c),P=r(se,"DT",{"data-svelte-h":!0}),S(P)!=="svelte-rw0fwr"&&(P.textContent=j),O=r(se,"DD",{});var et=y(O);ce=V(et,T),et.forEach(c),se.forEach(c),be.forEach(c),ue=I(E),te=r(E,"DIV",{class:!0});var Te=y(te);le=r(Te,"H2",{});var ye=y(le);fe=V(ye,`Data Lineage
        `),he=r(ye,"BUTTON",{class:!0,"data-svelte-h":!0}),S(he)!=="svelte-d9lgbu"&&(he.textContent=Ge),Ue=I(ye),ve=r(ye,"BUTTON",{class:!0,"data-svelte-h":!0}),S(ve)!=="svelte-15d9oih"&&(ve.textContent=qe),ye.forEach(c),Oe=I(Te);for(let xe=0;xe<W.length;xe+=1)W[xe].l(Te);Te.forEach(c),Pe=I(E),oe=r(E,"DIV",{class:!0});var ke=y(oe);Ie=r(ke,"H2",{"data-svelte-h":!0}),S(Ie)!=="svelte-pkgdtw"&&(Ie.textContent=Fe),Ve=I(ke),_e=r(ke,"TEXTAREA",{placeholder:!0}),y(_e).forEach(c),ze=I(ke),pe=r(ke,"BUTTON",{});var tt=y(pe);Le=V(tt,"Run /ready Check"),tt.forEach(c),He=I(ke),Z&&Z.l(ke),ke.forEach(c),je=I(E),me=r(E,"DIV",{class:!0});var Re=y(me);Ce=r(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),S(Ce)!=="svelte-zeixc6"&&(Ce.textContent=We),Be=I(Re),ge=r(Re,"BUTTON",{});var nt=y(ge);Me=V(nt,"Download Data (if paid)"),nt.forEach(c),Re.forEach(c),E.forEach(c),this.h()},h(){k(i,"class","metadata"),k(he,"class","lineage-controls"),k(ve,"class","lineage-controls"),k(te,"class","lineage"),k(_e,"placeholder","Policy JSON: requireLicense, maxPrice, etc."),pe.disabled=De=!t[3].trim(),k(oe,"class","policy-check"),k(Ce,"class","primary"),ge.disabled=Se=!t[1].price,k(me,"class","actions"),k(e,"class","detail")},m(D,E){B(D,e,E),o(e,n),o(n,l),o(e,a),o(e,i),o(i,f),o(i,p),o(i,u),o(u,A),o(u,F),o(F,ee),o(u,H),o(u,$),o($,Q),o(u,Y),o(u,M),o(M,ie),o(u,v),o(u,C),o(C,G),o(u,m),o(u,b),o(b,g),o(u,P),o(u,O),o(O,ce),o(e,ue),o(e,te),o(te,le),o(le,fe),o(le,he),o(le,Ue),o(le,ve),o(te,Oe);for(let J=0;J<W.length;J+=1)W[J]&&W[J].m(te,null);o(e,Pe),o(e,oe),o(oe,Ie),o(oe,Ve),o(oe,_e),lt(_e,t[3]),o(oe,ze),o(oe,pe),o(pe,Le),o(oe,He),Z&&Z.m(oe,null),o(e,je),o(e,me),o(me,Ce),o(me,Be),o(me,ge),o(ge,Me),Je||(Xe=[de(he,"click",t[15]),de(ve,"click",t[16]),de(_e,"input",t[21]),de(pe,"click",t[8]),de(Ce,"click",t[9])],Je=!0)},p(D,E){if(E&2&&s!==(s=D[1].versionId+"")&&q(l,s),E&2&&L!==(L=D[1].producer+"")&&q(ee,L),E&2&&K!==(K=Ae(D[1].createdAt)+"")&&q(Q,K),E&2&&U!==(U=D[1].contentHash+"")&&q(ie,U),E&2&&x!==(x=D[1].license+"")&&q(G,x),E&2&&h!==(h=D[1].price+"")&&q(g,h),E&2&&T!==(T=D[1].size+"")&&q(ce,T),E&15556){we=ot(D[2]);let J;for(J=0;J<we.length;J+=1){const be=st(D,we,J);W[J]?W[J].p(be,E):(W[J]=dt(be),W[J].c(),W[J].m(te,null))}for(;J<W.length;J+=1)W[J].d(1);W.length=we.length}E&8&&lt(_e,D[3]),E&8&&De!==(De=!D[3].trim())&&(pe.disabled=De),D[4]?Z?Z.p(D,E):(Z=ct(D),Z.c(),Z.m(oe,null)):Z&&(Z.d(1),Z=null),E&2&&Se!==(Se=!D[1].price)&&(ge.disabled=Se)},d(D){D&&c(e),mt(W,D),Z&&Z.d(),Je=!1,ut(Xe)}}}function It(t){let e,n="<div>Loading...</div>";return{c(){e=d("div"),e.innerHTML=n,this.h()},l(s){e=r(s,"DIV",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-18cympf"&&(e.innerHTML=n),this.h()},h(){k(e,"class","detail")},m(s,l){B(s,e,l)},p:Ee,d(s){s&&c(e)}}}function wt(t){let e,n="â””â”€â”¬",s,l,a="â—‰";return{c(){e=d("span"),e.textContent=n,s=w(),l=d("span"),l.textContent=a,this.h()},l(i){e=r(i,"SPAN",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1ivvwv7"&&(e.textContent=n),s=I(i),l=r(i,"SPAN",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-ncr82"&&(l.textContent=a),this.h()},h(){k(e,"class","tree-connector"),k(l,"class","tree-icon")},m(i,f){B(i,e,f),B(i,s,f),B(i,l,f)},d(i){i&&(c(e),c(s),c(l))}}}function yt(t){let e,n="â””â”€â”€",s,l,a="â—‰";return{c(){e=d("span"),e.textContent=n,s=w(),l=d("span"),l.textContent=a,this.h()},l(i){e=r(i,"SPAN",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-7v5fvr"&&(e.textContent=n),s=I(i),l=r(i,"SPAN",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-ncr82"&&(l.textContent=a),this.h()},h(){k(e,"class","tree-connector"),k(l,"class","tree-icon")},m(i,f){B(i,e,f),B(i,s,f),B(i,l,f)},d(i){i&&(c(e),c(s),c(l))}}}function Dt(t){let e,n="â—‰";return{c(){e=d("span"),e.textContent=n,this.h()},l(s){e=r(s,"SPAN",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-ncr82"&&(e.textContent=n),this.h()},h(){k(e,"class","tree-icon")},m(s,l){B(s,e,l)},d(s){s&&c(e)}}}function St(t){let e,n="(root)";return{c(){e=d("span"),e.textContent=n,this.h()},l(s){e=r(s,"SPAN",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-rbrkma"&&(e.textContent=n),this.h()},h(){k(e,"class","root-badge")},m(s,l){B(s,e,l)},d(s){s&&c(e)}}}function Tt(t){let e,n="(this)";return{c(){e=d("span"),e.textContent=n,this.h()},l(s){e=r(s,"SPAN",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-nc0c49"&&(e.textContent=n),this.h()},h(){k(e,"class","current-badge")},m(s,l){B(s,e,l)},d(s){s&&c(e)}}}function at(t){let e,n,s,l="Type:",a,i=t[23].type+"",f,_,p,u,A="License:",ne,F=t[23].license+"",L,ee,H,X,$="Producer:",K,Q=t[23].producer+"",Y,ae,M,U,ie="Created:",v,N=Ae(t[23].createdAt)+"",C,x,G,m,R="Size:",b,h=t[23].size+"",g,P,j=t[23].dependencies&&t[23].dependencies.length>0&&it(t);return{c(){e=d("div"),n=d("div"),s=d("strong"),s.textContent=l,a=w(),f=z(i),_=w(),p=d("div"),u=d("strong"),u.textContent=A,ne=w(),L=z(F),ee=w(),H=d("div"),X=d("strong"),X.textContent=$,K=w(),Y=z(Q),ae=w(),M=d("div"),U=d("strong"),U.textContent=ie,v=w(),C=z(N),x=w(),G=d("div"),m=d("strong"),m.textContent=R,b=w(),g=z(h),P=w(),j&&j.c(),this.h()},l(O){e=r(O,"DIV",{class:!0});var T=y(e);n=r(T,"DIV",{class:!0});var ce=y(n);s=r(ce,"STRONG",{"data-svelte-h":!0}),S(s)!=="svelte-1y9dw9w"&&(s.textContent=l),a=I(ce),f=V(ce,i),ce.forEach(c),_=I(T),p=r(T,"DIV",{class:!0});var ue=y(p);u=r(ue,"STRONG",{"data-svelte-h":!0}),S(u)!=="svelte-1wmykif"&&(u.textContent=A),ne=I(ue),L=V(ue,F),ue.forEach(c),ee=I(T),H=r(T,"DIV",{class:!0});var te=y(H);X=r(te,"STRONG",{"data-svelte-h":!0}),S(X)!=="svelte-lve41i"&&(X.textContent=$),K=I(te),Y=V(te,Q),te.forEach(c),ae=I(T),M=r(T,"DIV",{class:!0});var le=y(M);U=r(le,"STRONG",{"data-svelte-h":!0}),S(U)!=="svelte-1gha3lu"&&(U.textContent=ie),v=I(le),C=V(le,N),le.forEach(c),x=I(T),G=r(T,"DIV",{class:!0});var fe=y(G);m=r(fe,"STRONG",{"data-svelte-h":!0}),S(m)!=="svelte-1g9uum1"&&(m.textContent=R),b=I(fe),g=V(fe,h),fe.forEach(c),P=I(T),j&&j.l(T),T.forEach(c),this.h()},h(){k(n,"class","lineage-meta"),k(p,"class","lineage-meta"),k(H,"class","lineage-meta"),k(M,"class","lineage-meta"),k(G,"class","lineage-meta"),k(e,"class","lineage-details")},m(O,T){B(O,e,T),o(e,n),o(n,s),o(n,a),o(n,f),o(e,_),o(e,p),o(p,u),o(p,ne),o(p,L),o(e,ee),o(e,H),o(H,X),o(H,K),o(H,Y),o(e,ae),o(e,M),o(M,U),o(M,v),o(M,C),o(e,x),o(e,G),o(G,m),o(G,b),o(G,g),o(e,P),j&&j.m(e,null)},p(O,T){T&4&&i!==(i=O[23].type+"")&&q(f,i),T&4&&F!==(F=O[23].license+"")&&q(L,F),T&4&&Q!==(Q=O[23].producer+"")&&q(Y,Q),T&4&&N!==(N=Ae(O[23].createdAt)+"")&&q(C,N),T&4&&h!==(h=O[23].size+"")&&q(g,h),O[23].dependencies&&O[23].dependencies.length>0?j?j.p(O,T):(j=it(O),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(O){O&&c(e),j&&j.d()}}}function it(t){let e,n,s="Dependencies:",l,a=t[23].dependencies.join(", ")+"",i;return{c(){e=d("div"),n=d("strong"),n.textContent=s,l=w(),i=z(a),this.h()},l(f){e=r(f,"DIV",{class:!0});var _=y(e);n=r(_,"STRONG",{"data-svelte-h":!0}),S(n)!=="svelte-1khj2it"&&(n.textContent=s),l=I(_),i=V(_,a),_.forEach(c),this.h()},h(){k(e,"class","lineage-meta")},m(f,_){B(f,e,_),o(e,n),o(e,l),o(e,i)},p(f,_){_&4&&a!==(a=f[23].dependencies.join(", ")+"")&&q(i,a)},d(f){f&&c(e)}}}function rt(t){let e,n="â”‚";return{c(){e=d("div"),e.textContent=n,this.h()},l(s){e=r(s,"DIV",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1ct24nw"&&(e.textContent=n),this.h()},h(){k(e,"class","tree-connector-line")},m(s,l){B(s,e,l)},d(s){s&&c(e)}}}function dt(t){let e,n,s,l,a=t[23].versionId+"",i,f,_,p,u,A=t[6].has(t[23].versionId)?"â–¼":"â–¶",ne,F,L,ee="ðŸ“‹",H,X=t[6].has(t[23].versionId),$,K,Q,Y;function ae(h,g){return h[25]===0?Dt:h[23].isRoot?yt:wt}let M=ae(t),U=M(t);function ie(){return t[17](t[23])}function v(h,g){if(h[23].current)return Tt;if(h[23].isRoot)return St}let N=v(t),C=N&&N(t);function x(){return t[18](t[23])}function G(){return t[19](t[23])}let m=X&&at(t),R=!t[23].isRoot&&t[25]<t[2].length-1&&rt();function b(){return t[20](t[23])}return{c(){e=d("div"),n=d("div"),U.c(),s=w(),l=d("button"),i=z(a),_=w(),C&&C.c(),p=w(),u=d("button"),ne=z(A),F=w(),L=d("button"),L.textContent=ee,H=w(),m&&m.c(),$=w(),R&&R.c(),K=w(),this.h()},l(h){e=r(h,"DIV",{class:!0});var g=y(e);n=r(g,"DIV",{class:!0});var P=y(n);U.l(P),s=I(P),l=r(P,"BUTTON",{class:!0,title:!0});var j=y(l);i=V(j,a),j.forEach(c),_=I(P),C&&C.l(P),p=I(P),u=r(P,"BUTTON",{class:!0,"aria-label":!0});var O=y(u);ne=V(O,A),O.forEach(c),F=I(P),L=r(P,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),S(L)!=="svelte-2o3nqh"&&(L.textContent=ee),P.forEach(c),H=I(g),m&&m.l(g),$=I(g),R&&R.l(g),K=I(g),g.forEach(c),this.h()},h(){k(l,"class","version-link"),k(l,"title",f=t[23].current?"Current version":"Click to navigate"),re(l,"clickable",!t[23].current),k(u,"class","expand-toggle"),k(u,"aria-label","Toggle details"),k(L,"class","copy-btn"),k(L,"title","Copy version ID"),k(n,"class","lineage-node"),k(e,"class","lineage-item"),re(e,"current",t[23].current),re(e,"hovered",t[7]===t[23].versionId)},m(h,g){B(h,e,g),o(e,n),U.m(n,null),o(n,s),o(n,l),o(l,i),o(n,_),C&&C.m(n,null),o(n,p),o(n,u),o(u,ne),o(n,F),o(n,L),o(e,H),m&&m.m(e,null),o(e,$),R&&R.m(e,null),o(e,K),Q||(Y=[de(l,"click",ie),de(u,"click",x),de(L,"click",G),de(e,"mouseenter",b),de(e,"mouseleave",t[13])],Q=!0)},p(h,g){t=h,M!==(M=ae(t))&&(U.d(1),U=M(t),U&&(U.c(),U.m(n,s))),g&4&&a!==(a=t[23].versionId+"")&&q(i,a),g&4&&f!==(f=t[23].current?"Current version":"Click to navigate")&&k(l,"title",f),g&4&&re(l,"clickable",!t[23].current),N!==(N=v(t))&&(C&&C.d(1),C=N&&N(t),C&&(C.c(),C.m(n,p))),g&68&&A!==(A=t[6].has(t[23].versionId)?"â–¼":"â–¶")&&q(ne,A),g&68&&(X=t[6].has(t[23].versionId)),X?m?m.p(t,g):(m=at(t),m.c(),m.m(e,$)):m&&(m.d(1),m=null),!t[23].isRoot&&t[25]<t[2].length-1?R||(R=rt(),R.c(),R.m(e,K)):R&&(R.d(1),R=null),g&4&&re(e,"current",t[23].current),g&132&&re(e,"hovered",t[7]===t[23].versionId)},d(h){h&&c(e),U.d(),C&&C.d(),m&&m.d(),R&&R.d(),Q=!1,ut(Y)}}}function ct(t){let e;function n(a,i){return a[4].loading?Et:Rt}let s=n(t),l=s(t);return{c(){l.c(),e=Ne()},l(a){l.l(a),e=Ne()},m(a,i){l.m(a,i),B(a,e,i)},p(a,i){s===(s=n(a))&&l?l.p(a,i):(l.d(1),l=s(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){a&&c(e),l.d(a)}}}function Rt(t){let e,n=t[4].ready?"Ready":"Not Ready",s,l,a,i=t[4].reason+"",f;return{c(){e=d("div"),s=z(n),l=w(),a=d("div"),f=z(i),this.h()},l(_){e=r(_,"DIV",{class:!0});var p=y(e);s=V(p,n),p.forEach(c),l=I(_),a=r(_,"DIV",{});var u=y(a);f=V(u,i),u.forEach(c),this.h()},h(){k(e,"class","ready-status"),re(e,"ready",t[4].ready),re(e,"not-ready",!t[4].ready)},m(_,p){B(_,e,p),o(e,s),B(_,l,p),B(_,a,p),o(a,f)},p(_,p){p&16&&n!==(n=_[4].ready?"Ready":"Not Ready")&&q(s,n),p&16&&re(e,"ready",_[4].ready),p&16&&re(e,"not-ready",!_[4].ready),p&16&&i!==(i=_[4].reason+"")&&q(f,i)},d(_){_&&(c(e),c(l),c(a))}}}function Et(t){let e,n="Checking policy...";return{c(){e=d("div"),e.textContent=n},l(s){e=r(s,"DIV",{"data-svelte-h":!0}),S(e)!=="svelte-1nzmgbk"&&(e.textContent=n)},m(s,l){B(s,e,l)},p:Ee,d(s){s&&c(e)}}}function Nt(t){let e;function n(a,i){return a[5]?It:a[1]?bt:gt}let s=n(t),l=s(t);return{c(){l.c(),e=Ne()},l(a){l.l(a),e=Ne()},m(a,i){l.m(a,i),B(a,e,i)},p(a,[i]){s===(s=n(a))&&l?l.p(a,i):(l.d(1),l=s(a),l&&(l.c(),l.m(e.parentNode,e)))},i:Ee,o:Ee,d(a){a&&c(e),l.d(a)}}}function At(t,e){return t.lineage&&Array.isArray(t.lineage)?t.lineage.map((n,s)=>({versionId:n.versionId||n.id||`unknown-${s}`,license:n.license||"Unknown",producer:n.producer||"Unknown",current:n.versionId===e,createdAt:n.createdAt||new Date().toISOString(),size:n.size||"Unknown",type:n.type||"Unknown",dependencies:n.dependencies||[],isRoot:s===t.lineage.length-1})):[{versionId:e,license:"Unknown",producer:"Unknown",current:!0,createdAt:new Date().toISOString(),size:"Unknown",type:"Unknown",dependencies:[],isRoot:!0}]}function Ae(t){return new Date(t).toLocaleString()}function Ut(t){navigator.clipboard.writeText(t)}function Ot(t,e,n){let s;_t(t,Ct,v=>n(14,s=v));let l="",a=null,i=[],f="",_=null,p=!1,u=new Set,A=null;pt(()=>{l&&ne()});async function ne(){var v,N,C,x,G;n(5,p=!0);try{let m=!1;try{const b=await fetch(`/listings/${encodeURIComponent(l)}`);if(b.ok){const h=await b.json();n(1,a={versionId:h.versionId,type:((v=h.manifest)==null?void 0:v.name)||"Dataset",producer:((N=h.manifest)==null?void 0:N.datasetId)||"Unknown",createdAt:((C=h.manifest)==null?void 0:C.createdAt)||new Date().toISOString(),license:((x=h.manifest)==null?void 0:x.license)||"See manifest",contentHash:((G=h.manifest)==null?void 0:G.contentHash)||"Unknown",price:"Variable",size:"Unknown"}),m=!0}}catch(b){console.warn("Listings API failed:",b)}if(!m)try{const b=await fetch(`/api/models/${encodeURIComponent(l)}`);if(b.ok){const h=await b.json();n(1,a={versionId:h.modelVersionId,type:`${h.framework} Model`,producer:"Model Registry",createdAt:new Date(h.createdAt*1e3).toISOString(),license:"See model details",contentHash:h.modelHash,price:"Variable",size:h.sizeBytes?`${(h.sizeBytes/1024/1024).toFixed(1)} MB`:"Unknown"}),m=!0}}catch(b){console.warn("Models API failed:",b)}if(!m)throw new Error("Dataset not found in any registry");let R=!1;if(l.startsWith("md_"))try{const b=await fetch(`/api/models/${encodeURIComponent(l)}/lineage`);if(b.ok){const h=await b.json();Array.isArray(h)&&h.length>0&&(n(2,i=h.map((g,P)=>({versionId:g.versionId,license:"See details",producer:"System",current:g.versionId===l,createdAt:g.createdAt||new Date().toISOString(),size:"Unknown",type:g.type||"Unknown",dependencies:[],isRoot:P===h.length-1}))),R=!0)}}catch(b){console.warn("Model lineage API failed:",b)}if(!R)try{const b=await fetch(`/bundle?versionId=${encodeURIComponent(l)}`);if(b.ok){const h=await b.json();n(2,i=At(h,l)),R=!0}}catch(b){console.warn("Bundle API failed:",b)}R||n(2,i=[{versionId:l,license:a.license,producer:a.producer,current:!0,createdAt:a.createdAt,size:a.size,type:a.type,dependencies:[],isRoot:!0}]),n(6,u=new Set(i.map(b=>b.versionId)))}catch(m){console.error("Failed to load dataset:",m),n(1,a=null),n(2,i=[])}finally{n(5,p=!1)}}async function F(){if(f.trim())try{n(4,_={loading:!0});const v=JSON.parse(f),N=await fetch(`/ready?versionId=${encodeURIComponent(l)}`);if(!N.ok)throw new Error(`HTTP ${N.status}: ${N.statusText}`);const C=await N.json();n(4,_={ready:C.ready||!1,reason:C.reason||C.message||"No reason provided",policy:v,details:C})}catch(v){n(4,_={ready:!1,reason:v.message.includes("JSON")?"Invalid JSON policy":`Policy check failed: ${v.message}`,error:v.message})}}function L(){const v={versionId:a.versionId,metadata:a,lineage:i},N=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),C=URL.createObjectURL(N),x=document.createElement("a");x.href=C,x.download=`${a.versionId}-manifest.json`,x.click(),URL.revokeObjectURL(C)}function ee(v){u.has(v)?u.delete(v):u.add(v),n(6,u)}function H(v){v!==l&&kt(`/explorer/version/${encodeURIComponent(v)}`)}function X(v){n(7,A=v)}function $(){n(7,A=null)}const K=()=>n(6,u=new Set(i.map(v=>v.versionId))),Q=()=>n(6,u=new Set),Y=v=>H(v.versionId),ae=v=>ee(v.versionId),M=v=>Ut(v.versionId),U=v=>X(v.versionId);function ie(){f=this.value,n(3,f)}return t.$$.update=()=>{t.$$.dirty&16384&&n(0,l=s.params.id)},[l,a,i,f,_,p,u,A,F,L,ee,H,X,$,s,K,Q,Y,ae,M,U,ie]}class jt extends ft{constructor(e){super(),ht(this,e,Ot,Nt,vt,{})}}export{jt as component};
