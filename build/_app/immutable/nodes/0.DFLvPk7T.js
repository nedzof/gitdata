import{S as le,i as te,s as se,W as ne,d as _,r as oe,J as ae,K as re,m as Z,x as V,X as ce,Y as ie,Z as ue,b as F,c as d,o as A,p as h,e as v,f as I,q as fe,h as L,j as g,k as N,v as de,a as x,g as M,t as P,n as ee}from"../chunks/BOFvEgh9.js";import"../chunks/IHki7fMi.js";import{g as _e}from"../chunks/Bl12ujJP.js";import{bsvWalletService as K}from"../chunks/Dt8Mewlk.js";function he(t){let l;return{c(){l=P("🔗 Connect Wallet")},l(e){l=M(e,"🔗 Connect Wallet")},m(e,o){F(e,l,o)},p:ee,d(e){e&&_(l)}}}function pe(t){let l,e=$(t[2])+"",o;return{c(){l=P("🟢 "),o=P(e)},l(a){l=M(a,"🟢 "),o=M(a,e)},m(a,r){F(a,l,r),F(a,o,r)},p(a,r){r&4&&e!==(e=$(a[2])+"")&&x(o,e)},d(a){a&&(_(l),_(o))}}}function me(t){let l;return{c(){l=P("⏳ Connecting...")},l(e){l=M(e,"⏳ Connecting...")},m(e,o){F(e,l,o)},p:ee,d(e){e&&_(l)}}}function z(t){let l,e,o=(t[4].length>30?t[4].slice(0,30)+"...":t[4])+"",a;return{c(){l=g("div"),e=P("⚠️ "),a=P(o),this.h()},l(r){l=v(r,"DIV",{class:!0,title:!0});var c=I(l);e=M(c,"⚠️ "),a=M(c,o),c.forEach(_),this.h()},h(){h(l,"class","wallet-error svelte-1hhgl68"),h(l,"title",t[4])},m(r,c){F(r,l,c),d(l,e),d(l,a)},p(r,c){c&16&&o!==(o=(r[4].length>30?r[4].slice(0,30)+"...":r[4])+"")&&x(a,o),c&16&&h(l,"title",r[4])},d(r){r&&_(l)}}}function ve(t){let l,e,o,a,r='<a href="/" class="logo">Gitdata</a>',c,p,b,u,S,D,w,n,y,R,W,E,U,G;function O(s,i){return s[3]?me:s[1]?pe:he}let T=O(t),C=T(t),f=t[4]&&z(t);const q=t[8].default,m=ne(q,t,t[7],null);return{c(){l=g("div"),e=g("header"),o=g("div"),a=g("div"),a.innerHTML=r,c=N(),p=g("div"),b=g("form"),u=g("input"),S=N(),D=g("div"),w=g("div"),n=g("button"),C.c(),y=N(),f&&f.c(),R=N(),W=g("main"),m&&m.c(),this.h()},l(s){l=v(s,"DIV",{class:!0});var i=I(l);e=v(i,"HEADER",{class:!0});var j=I(e);o=v(j,"DIV",{class:!0});var k=I(o);a=v(k,"DIV",{class:!0,"data-svelte-h":!0}),fe(a)!=="svelte-ugywpy"&&(a.innerHTML=r),c=L(k),p=v(k,"DIV",{class:!0});var B=I(p);b=v(B,"FORM",{class:!0});var J=I(b);u=v(J,"INPUT",{class:!0,placeholder:!0}),J.forEach(_),B.forEach(_),S=L(k),D=v(k,"DIV",{class:!0});var Q=I(D);w=v(Q,"DIV",{class:!0});var H=I(w);n=v(H,"BUTTON",{class:!0});var X=I(n);C.l(X),X.forEach(_),y=L(H),f&&f.l(H),H.forEach(_),Q.forEach(_),k.forEach(_),j.forEach(_),R=L(i),W=v(i,"MAIN",{class:!0});var Y=I(W);m&&m.l(Y),Y.forEach(_),i.forEach(_),this.h()},h(){h(a,"class","nav-left"),h(u,"class","search-input-nav"),h(u,"placeholder","Search versionId, txid, contentHash..."),h(b,"class","global-search"),h(p,"class","nav-center"),h(n,"class","wallet-btn svelte-1hhgl68"),n.disabled=t[3],V(n,"connected",t[1]),V(n,"loading",t[3]),V(n,"error",t[4]),h(w,"class","wallet-container svelte-1hhgl68"),h(D,"class","nav-right"),h(o,"class","nav-container"),h(e,"class","top-nav"),h(W,"class","content"),h(l,"class","app")},m(s,i){F(s,l,i),d(l,e),d(e,o),d(o,a),d(o,c),d(o,p),d(p,b),d(b,u),Z(u,t[0]),d(o,S),d(o,D),d(D,w),d(w,n),C.m(n,null),d(w,y),f&&f.m(w,null),d(l,R),d(l,W),m&&m.m(W,null),E=!0,U||(G=[A(u,"input",t[9]),A(b,"submit",t[5]),A(n,"click",t[6])],U=!0)},p(s,[i]){i&1&&u.value!==s[0]&&Z(u,s[0]),T===(T=O(s))&&C?C.p(s,i):(C.d(1),C=T(s),C&&(C.c(),C.m(n,null))),(!E||i&8)&&(n.disabled=s[3]),(!E||i&2)&&V(n,"connected",s[1]),(!E||i&8)&&V(n,"loading",s[3]),(!E||i&16)&&V(n,"error",s[4]),s[4]?f?f.p(s,i):(f=z(s),f.c(),f.m(w,null)):f&&(f.d(1),f=null),m&&m.p&&(!E||i&128)&&ce(m,q,s,s[7],E?ue(q,s[7],i,null):ie(s[7]),null)},i(s){E||(re(m,s),E=!0)},o(s){ae(m,s),E=!1},d(s){s&&_(l),C.d(),f&&f.d(),m&&m.d(s),U=!1,oe(G)}}}function $(t){return t?t.length>12?`${t.slice(0,6)}...${t.slice(-6)}`:t:""}function ge(t,l,e){let{$$slots:o={},$$scope:a}=l,r="",c=!1,p="",b=!1,u="";de(()=>(K.isWalletConnected()&&(e(1,c=!0),e(2,p=K.getPublicKey()||"")),K.onConnectionChange(y=>{e(1,c=y),y?(e(2,p=K.getPublicKey()||""),e(4,u="")):e(2,p="")})));function S(n){n.preventDefault(),r.trim()&&_e(`/data/version/${encodeURIComponent(r.trim())}`)}async function D(){if(console.log("🔘 Connect wallet button clicked"),c){console.log("🔄 Disconnecting wallet...");try{await K.disconnect(),e(1,c=!1),e(2,p=""),e(4,u=""),console.log("✅ Wallet disconnected successfully")}catch(n){console.error("❌ Failed to disconnect wallet:",n),e(4,u="Failed to disconnect wallet")}return}console.log("🔄 Connecting wallet..."),e(3,b=!0),e(4,u="");try{const n=await K.connect();e(1,c=!0),e(2,p=n.publicKey||""),console.log("✅ Wallet connected successfully")}catch(n){console.error("❌ Failed to connect wallet:",n),e(4,u=n.message||"Failed to connect wallet"),e(1,c=!1)}finally{e(3,b=!1)}}function w(){r=this.value,e(0,r)}return t.$$set=n=>{"$$scope"in n&&e(7,a=n.$$scope)},[r,c,p,b,u,S,D,a,o,w]}class Ie extends le{constructor(l){super(),te(this,l,ge,ve,se,{})}}export{Ie as component};
