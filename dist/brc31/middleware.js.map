{"version":3,"file":"middleware.js","sourceRoot":"","sources":["../../src/brc31/middleware.ts"],"names":[],"mappings":"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"}