# D16 A2A Test Report

## Test Execution Summary
**Timestamp:** 2025-09-19T12:33:59.268Z
**Node Version:** v18.19.1
**Overlay Port:** 3030

## Test Results

### Unit Tests
- **Status:** ❌ FAILED
- **Output:** Command failed: npm test
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
stderr | test/a2a-workflow.test.ts > A2A Workflow Integration > 7. Update Rule (Disable)
Update rule error: RangeError: Missing named parameter "name"
    at Module.upsertRule (/home/caruk/Downloads/gitdata/src/db/index.ts:603:7)
    at /home/caruk/Downloads/gitdata/src/routes/rules.ts:207:7
    at Layer.handle [as handle_request] (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/layer.js:95:5)
    at /home/caruk/Downloads/gitdata/node_modules/express/lib/router/index.js:284:15
    at param (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/index.js:365:14)
    at param (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/index.js:376:14)
    at Function.process_params (/home/caruk/Downloads/gitdata/node_modules/express/lib/router/index.js:421:3)

⎯⎯⎯⎯⎯⎯ Failed Suites 3 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  test/opreturn-dlm1.spec.ts [ test/opreturn-dlm1.spec.ts ]
Error: No test suite found in file /home/caruk/Downloads/gitdata/test/opreturn-dlm1.spec.ts
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/4]⎯

 FAIL  test/opreturn.spec.ts [ test/opreturn.spec.ts ]
Error: No test suite found in file /home/caruk/Downloads/gitdata/test/opreturn.spec.ts
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/4]⎯

 FAIL  test/spv.spec.ts [ test/spv.spec.ts ]
Error: No test suite found in file /home/caruk/Downloads/gitdata/test/spv.spec.ts
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/4]⎯

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 1 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  test/a2a-workflow.test.ts > A2A Workflow Integration > 7. Update Rule (Disable)
AssertionError: expected 500 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 500

 ❯ test/a2a-workflow.test.ts:180:29
    178|       .send({ enabled: false });
    179| 
    180|     expect(response.status).toBe(200);
       |                             ^
    181|     expect(response.body.ruleId).toBe(ruleId);
    182|     expect(response.body.enabled).toBe(false);

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/4]⎯



### Integration Tests
- **Status:** ❌ FAILED
- **Output:** ✓ Metrics data verified: {
  requests: 2,
  admissions: 3,
  cacheHits: 1,
  cacheMisses: 1,
  proofSamples: 2
}
OK: /metrics & /health tests passed.


### End-to-End Tests
- **Status:** ✅ PASSED
- **Output:** E2E test completed successfully with evidence collection
- **Evidence Directory:** /tmp/a2a-demo-evidence-1758285244292

## Artifacts Status

### Required Artifacts (D16 Section 9)
- **Postman Collection:** ✅ Present
- **Evidence Directory:** ✅ Generated
- **Summary Report:** ✅ Generated

## D16 Definition of Done (DoD) Compliance

### E2E-Minimal Requirements
- **Agents registered and discoverable:** ✅
- **Rules executed successfully:** ✅
- **Jobs state transitions working:** ✅
- **BRC-31 signed webhook evidence:** ✅

### Acceptance Criteria Met
- **Agent registry/discovery:** ✅
- **Rule CRUD and triggering:** ✅
- **Job queue processing:** ✅
- **Evidence collection:** ✅

## Overall Status
**❌ FAILURE**


## Errors Found: 1



## Generated Files
- Test results: /home/caruk/Downloads/gitdata/test-results/a2a-1758285239268
- A2A evidence: a2a-demo-evidence/
- This report: /home/caruk/Downloads/gitdata/test-results/a2a-1758285239268/test-report.md

---
Generated by D16 A2A Test Runner
